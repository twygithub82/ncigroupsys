<div class="tlx-table-card">
    <div class="table-container">
        <div class="table-header" [class.first-row]="true" [class.last-row]="processedItems.length === 0"
            [class.single-row]="processedItems.length === 0">
            @for(column of columns; track column.key) {
            <div class="header-cell">{{ column.header }}</div>
            }
        </div>

        @for(item of items; track $index; let i = $index; let isFirst = $first; let isLast = $last) {
        <div class="table-row" [class.first-row]="isFirst && items.length > 0" [class.last-row]="isLast"
            [class.single-row]="items.length === 1">

            <div class="desktop-row">
                @if(rowTemplate) {
                <ng-container *ngTemplateOutlet="rowTemplate; context: { $implicit: item, index: i }"></ng-container>
                } @else {
                @for(cellData of processedItems[i]; track $index) {
                <div class="row-cell">{{ cellData }}</div>
                }
                }
            </div>

            <div class="mobile-row">
                <div class="row-label">{{ rowLabel }} {{ i + 1 }}</div>
                @if(mobileRowTemplate) {
                <ng-container
                    *ngTemplateOutlet="mobileRowTemplate; context: { $implicit: item, index: i }"></ng-container>
                } @else {
                @for(cellData of processedItems[i]; track $index; let j = $index) {
                <div class="mobile-field">
                    <span class="field-label">{{ columns[j].header }}</span>
                    <span class="field-value">{{ cellData }}</span>
                </div>
                }
                }
            </div>
        </div>
        }
    </div>
</div>