<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="pageTitle" [items]="breadcrumsMiddleList"
        [active_item]="langText.SURVEY_FORM"></app-breadcrumb>
    </div>
    @if (this.getBackgroundColorFromNature()) {
    <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card l-bg-{{this.getBackgroundColorFromNature()}} pt-1 pb-1">
          <div class="body">
            <mat-card-content class="d-flex align-items-center text-white">
              <mat-icon>error</mat-icon>
              <mat-label class="m-l-10">{{this.getNatureInGateAlert()}}</mat-label>
            </mat-card-content>
          </div>
        </div>
      </div>
    </div>
    }
    <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="header">
            <h2>
              {{translatedLangText.ORDER_DETAILS}}
            </h2>
          </div>
          <div class="body">
            @if (igDS.loading$ | async) {
            <div class="tbl-spinner">
              <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
              </mat-progress-spinner>
            </div>
            }
            @if (!(igDS.loading$ | async)) {
            <mat-card-content>
              <div class="row">
                <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.TANK_NO}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">{{in_gate?.tank?.tank_no}}</div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.CUSTOMER}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{ccDS.displayName(in_gate?.tank?.storing_order?.customer_company)}}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.OWNER}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{ccDS.displayName(in_gate?.tank?.customer_company)}}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.EIR_NO}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{in_gate?.eir_no}}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.EIR_DATE}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{displayDateTime(in_gate?.eir_dt)}}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.LAST_CARGO}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">{{in_gate?.tank?.tariff_cleaning?.cargo}}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.PURPOSE}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{displayTankPurpose(in_gate?.tank!)}}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.CLEAN_STATUS}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{getCleanStatusDescription(in_gate?.tank?.clean_status_cv)}}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                      <span>{{translatedLangText.CURRENT_STATUS}}:</span>
                    </div>
                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                      <div class="contact-detail-info font-bold">
                        {{getTankStatusDescription(in_gate?.tank?.tank_status_cv)}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-content>
            }
          </div>
        </div>
      </div>
    </div>
    <form class="ms-0" [formGroup]="surveyForm!" #formDirective="ngForm">
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="card">
            <div class="row">
              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="header">
                  <h2>
                    {{translatedLangText.SURVEY_INFO}}
                  </h2>
                </div>
                <div class="body">
                  @if (igDS.loading$ | async) {
                  <div class="tbl-spinner">
                    <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                    </mat-progress-spinner>
                  </div>
                  }
                  @if (!(igDS.loading$ | async)) {
                  <mat-card-content>
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 align-right">
                            <span>{{translatedLangText.DATE_OF_INSPECTION}}:</span>
                          </div>
                          <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5">
                            <div class="contact-detail-info font-bold">{{displayDate(dateOfInspection)}}</div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5 align-right">
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-card-content>
                  }
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <mat-stepper class="example-stepper" [orientation]="(stepperOrientation | async)!" #stepper>
                  <mat-step [stepControl]="getTankDetailsFormGroup()"
                    [completed]="this.in_gate?.in_gate_survey?.guid ? true : getTankDetailsFormGroup().valid">
                    <form [formGroup]="getTankDetailsFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.TANK_DETAILS}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <mat-card-content>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.UNIT_TYPE}}</mat-label>
                                <mat-select formControlName="unit_type_guid" required>
                                  @if (unit_typeList && unit_typeList.length) {
                                  @for (option of unit_typeList; track option) {
                                  <mat-option [value]="option.guid">{{option.unit_type}}</mat-option>
                                  }
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.unit_type_guid')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.UNIT_TYPE}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.OWNER}}</mat-label>
                                <input type="text" matInput [formControl]="ownerControl" [matAutocomplete]="ownerCode"
                                  formControlName="owner" required>
                                <mat-autocomplete #ownerCode="matAutocomplete" [displayWith]="displayCustomerCompanyFn">
                                  @for (cc of ownerList; track cc) {
                                  <mat-option [value]="cc">
                                    {{ccDS.displayName(cc)}}
                                  </mat-option>
                                  }
                                </mat-autocomplete>
                                @if (surveyForm?.get('tank_details.owner')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.CUSTOMER}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.MANUFACTURER}}</mat-label>
                                <mat-select formControlName="manufacturer_cv" required>
                                  @for (codeValue of manufacturerCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.manufacturer_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.MANUFACTURER}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.DOM}}</mat-label>
                                <input matInput formControlName="dom_dt" [matDatepicker]="manufacturer_dom_picker"
                                  [max]="maxManuDOMDt" required>
                                <mat-datepicker-toggle matSuffix
                                  [for]="manufacturer_dom_picker"></mat-datepicker-toggle>
                                <mat-datepicker #manufacturer_dom_picker [startAt]="maxManuDOMDt"></mat-datepicker>
                                @if (surveyForm?.get('tank_details.dom_dt')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.DOM}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.CLADDING}}</mat-label>
                                <mat-select formControlName="cladding_cv" required>
                                  @for (codeValue of claddingCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.cladding_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.CLADDING}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.CAPACITY}}</mat-label>
                                <input matInput formControlName="capacity" type="number"
                                  (wheel)="preventDefault($event)" min="0" required>
                                <h6 class="color-icon p-t-15 p-r-5" matSuffix>L</h6>
                                @if (surveyForm?.get('tank_details.capacity')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.CAPACITY}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.TARE_WEIGHT}}</mat-label>
                                <input matInput formControlName="tare_weight" type="number"
                                  (wheel)="preventDefault($event)" min="0" required>
                                <h6 class="color-icon p-t-15 p-r-5" matSuffix>KG</h6>
                                @if (surveyForm?.get('tank_details.tare_weight')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.TARE_WEIGHT}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.MAX_GROSS_WEIGHT}}</mat-label>
                                <mat-select formControlName="max_weight_cv" required>
                                  @for (codeValue of maxGrossWeightCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.max_weight_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.MAX_GROSS_WEIGHT}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.TANK_HEIGHT}}</mat-label>
                                <mat-select formControlName="height_cv" required>
                                  @for (codeValue of tankHeightCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.height_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.TANK_HEIGHT}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.WALKWAY}}</mat-label>
                                <mat-select formControlName="walkway_cv" required>
                                  @for (codeValue of walkwayCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.walkway_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.WALKWAY}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.COMPARTMENT_TYPE}}</mat-label>
                                <mat-select formControlName="tank_comp_guid" required>
                                  @for (buffer of packageBufferList; track buffer) {
                                  <mat-option
                                    [value]="buffer.tariff_buffer_guid">{{buffer.tariff_buffer?.buffer_type}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('tank_details.tank_comp_guid')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.COMPARTMENT_TYPE}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.OTHER_COMMENTS}}</mat-label>
                                <textarea matInput formControlName="comments"></textarea>
                              </mat-form-field>
                            </div>
                          </div>
                        </mat-card-content>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2">
                            <mat-icon>chevron_right</mat-icon>
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step>
                  <mat-step [stepControl]="getPeriodicTestFormGroup()"
                    [completed]="this.in_gate?.in_gate_survey?.guid ? true : getPeriodicTestFormGroup().valid">
                    <form [formGroup]="getPeriodicTestFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.PERIODIC_TEST}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <mat-card-content>
                          <div class="row">
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                                  <span>{{translatedLangText.LAST_TEST}}:</span>
                                </div>
                                <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                  <div class="contact-detail-info font-bold">
                                    {{last_test_desc}}
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                                  <span>{{translatedLangText.NEXT_TEST}}:</span>
                                </div>
                                <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                  <div class="contact-detail-info font-bold">
                                    {{next_test_desc}}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.TEST_TYPE}}</mat-label>
                                <mat-select formControlName="last_test_cv" required>
                                  @for (codeValue of testTypeCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('periodic_test.last_test_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.TEST_TYPE}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.DATE}}</mat-label>
                                <input matInput formControlName="test_dt" [matDatepicker]="test_dt_picker" required>
                                <mat-datepicker-toggle matSuffix [for]="test_dt_picker"></mat-datepicker-toggle>
                                <mat-datepicker #test_dt_picker startView="multi-year"
                                  (yearSelected)="chosenYearHandler($event)"
                                  (monthSelected)="chosenMonthHandler($event, test_dt_picker)"
                                  panelClass="example-month-picker"></mat-datepicker>
                                @if (surveyForm?.get('periodic_test.test_dt')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.DATE}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.CLASS}}</mat-label>
                                <mat-select formControlName="test_class_cv" required>
                                  @for (codeValue of testClassCvList; track codeValue) {
                                  <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                  }
                                </mat-select>
                                @if (surveyForm?.get('periodic_test.test_class_cv')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.CLASS}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                        </mat-card-content>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                          <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                            <mat-icon>chevron_left</mat-icon>
                          </button>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2">
                            <mat-icon>chevron_right</mat-icon>
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step>
                  <mat-step [stepControl]="getInGateDetailsFormGroup()"
                    [completed]="this.in_gate?.in_gate_survey?.guid ? true : getInGateDetailsFormGroup().valid">
                    <form [formGroup]="getInGateDetailsFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.IN_GATE_DETAILS}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <mat-card-content>
                          <div class="row">
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.IN_GATE_REMARKS}}</mat-label>
                                <textarea matInput formControlName="in_gate_remarks"></textarea>
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.VEHICLE_NO}}</mat-label>
                                <input matInput formControlName="vehicle_no" class="text-uppercase" required>
                                @if (surveyForm?.get('in_gate_details.vehicle_no')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.VEHICLE_NO}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.DRIVER_NAME}}</mat-label>
                                <input matInput formControlName="driver_name" required>
                                @if (surveyForm?.get('in_gate_details.driver_name')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.DRIVER_NAME}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 col-xs-12 m-b-5">
                              <mat-form-field class="example-full-width">
                                <mat-label>{{translatedLangText.HAULIER}}</mat-label>
                                <input matInput formControlName="haulier" required>
                                @if (surveyForm?.get('in_gate_details.haulier')?.hasError('required')) {
                                <mat-error>
                                  {{translatedLangText.HAULIER}} {{translatedLangText.SO_REQUIRED}}
                                </mat-error>
                                }
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                                  <span>{{translatedLangText.LAST_UPDATE_BY}}:</span>
                                </div>
                                <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                  <div class="contact-detail-info font-bold">{{in_gate?.update_by}}</div>
                                </div>
                              </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-5 col-xs-5 m-b-5 align-right">
                                  <span>{{translatedLangText.LAST_UPDATE_ON}}:</span>
                                </div>
                                <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                  <div class="contact-detail-info font-bold">{{displayDateTime(in_gate?.update_dt)}}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </mat-card-content>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                          <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                            <mat-icon>chevron_left</mat-icon>
                          </button>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2">
                            <mat-icon>chevron_right</mat-icon>
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step>
                  <mat-step [stepControl]="getFrameTypeFormGroup()"
                    [completed]="this.in_gate?.in_gate_survey?.guid ? true : getFrameTypeFormGroup().valid">
                    <form [formGroup]="getFrameTypeFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.FRAME_TYPE}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <div class="row">
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 mb-3 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.LEFT_REMARKS, surveyForm?.get('frame_type.leftRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.leftRemarks')?.value">
                                @if (surveyForm?.get('frame_type.leftRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.LEFT_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsLeft, $event)">
                                <mat-icon>cached</mat-icon>
                              </button>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/left_side.png"
                                class="img-fluid">
                              <div class="grid-overlay" (mousedown)="startDrawing(highlightedCellsLeft, $event)"
                                (mousemove)="draw(highlightedCellsLeft, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsLeft, $event)"
                                (touchmove)="draw(highlightedCellsLeft, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cells; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsLeft[index], 'disabled-cell': isDisabledRect(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledRect(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledRect(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 mb-3 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.REAR_REMARKS, surveyForm?.get('frame_type.rearRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.rearRemarks')?.value">
                                @if (surveyForm?.get('frame_type.rearRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.REAR_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsRear, $event)">
                                <mat-icon>cached</mat-icon>
                              </button>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/rear_side.png"
                                class="img-fluid">
                              <div class="grid-overlay-square" (mousedown)="startDrawing(highlightedCellsRear, $event)"
                                (mousemove)="draw(highlightedCellsRear, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsRear, $event)"
                                (touchmove)="draw(highlightedCellsRear, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cellsSquare; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsRear[index], 'disabled-cell': isDisabledSquare(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledSquare(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledSquare(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 mb-3 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.RIGHT_REMARKS, surveyForm?.get('frame_type.rightRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.rightRemarks')?.value">
                                @if (surveyForm?.get('frame_type.rightRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.RIGHT_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsRight, $event)">
                                <mat-icon>cached</mat-icon>
                              </button>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/right_side.png"
                                class="img-fluid">
                              <div class="grid-overlay" (mousedown)="startDrawing(highlightedCellsRight, $event)"
                                (mousemove)="draw(highlightedCellsRight, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsRight, $event)"
                                (touchmove)="draw(highlightedCellsRight, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cells; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsRight[index], 'disabled-cell': isDisabledRect(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledRect(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledRect(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-0 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.TOP_REMARKS, surveyForm?.get('frame_type.topRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.topRemarks')?.value">
                                @if (surveyForm?.get('frame_type.topRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.TOP_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsRight, $event, true)">
                                <mat-icon>cached</mat-icon>
                              </button>
                              <mat-checkbox class="m-l-5" color="primary" (change)="selectMarkDmg()">
                                {{translatedLangText.MARK_DAMAGE}}
                              </mat-checkbox>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/top_side.png"
                                class="img-fluid">
                              <div [ngClass]="{'grid-overlay': true, 'to-mark': isMarkDmg}"
                                (mousedown)="startDrawing(highlightedCellsTop, $event)"
                                (mousemove)="draw(highlightedCellsTop, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsTop, $event)"
                                (touchmove)="draw(highlightedCellsTop, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cells; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsTop[index], 'disabled-cell': isDisabledRect(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledRect(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledRect(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                              <div [ngClass]="{'custom-container': true, 'to-mark opacity-75': !isMarkDmg}">
                                <div class="outer-layer">
                                  <div class="outer-top">
                                  </div>

                                  <!-- Middle part with inner grid and side borders -->
                                  <div class="outer-middle">
                                    <div class="outer-left">
                                    </div>
                                    <div class="inner-grid">
                                      <!-- Top Row with 4 Columns -->
                                      <div class="grid-top-row"
                                        (mousedown)="startDrawing(highlightedCellsWalkwayTop, $event)"
                                        (mousemove)="draw(highlightedCellsWalkwayTop, $event)" (mouseup)="stopDrawing()"
                                        (mouseleave)="stopDrawing()"
                                        (touchstart)="startDrawing(highlightedCellsWalkwayTop, $event)"
                                        (touchmove)="draw(highlightedCellsWalkwayTop, $event)"
                                        (touchend)="stopDrawing()" (touchcancel)="stopDrawing()">
                                        @for (cell of cellsInnerTopBottom; track cell; let index = $index) {
                                        <div class="grid-cell" [ngClass]="{'walkway-highlighted': highlightedCellsWalkwayTop[index],
                                          }" [attr.data-index]="index" (mousedown)="$event.preventDefault()"
                                          (touchstart)="$event.preventDefault()"></div>
                                        }
                                      </div>

                                      <!-- Middle Row (to be defined later) -->
                                      <div class="grid-middle-row"
                                        (mousedown)="startDrawing(highlightedCellsWalkwayMiddle, $event)"
                                        (mousemove)="draw(highlightedCellsWalkwayMiddle, $event)"
                                        (mouseup)="stopDrawing()" (mouseleave)="stopDrawing()"
                                        (touchstart)="startDrawing(highlightedCellsWalkwayMiddle, $event)"
                                        (touchmove)="draw(highlightedCellsWalkwayMiddle, $event)"
                                        (touchend)="stopDrawing()" (touchcancel)="stopDrawing()">
                                        @for (cell of cellsInnerMiddle; track cell; let index = $index) {
                                        <div class="grid-cell" [ngClass]="{'walkway-highlighted': highlightedCellsWalkwayMiddle[index],
                                          'disabled-cell': isDisabled(index)}" [attr.data-index]="index"
                                          (mousedown)="!isDisabled(index) && $event.preventDefault()"
                                          (touchstart)="!isDisabled(index) && $event.preventDefault()"></div>
                                        }
                                      </div>

                                      <!-- Bottom Row with 4 Columns -->
                                      <div class="grid-bottom-row"
                                        (mousedown)="startDrawing(highlightedCellsWalkwayBottom, $event)"
                                        (mousemove)="draw(highlightedCellsWalkwayBottom, $event)"
                                        (mouseup)="stopDrawing()" (mouseleave)="stopDrawing()"
                                        (touchstart)="startDrawing(highlightedCellsWalkwayBottom, $event)"
                                        (touchmove)="draw(highlightedCellsWalkwayBottom, $event)"
                                        (touchend)="stopDrawing()" (touchcancel)="stopDrawing()">
                                        @for (cell of cellsInnerTopBottom; track cell; let index = $index) {
                                        <div class="grid-cell"
                                          [ngClass]="{'walkway-highlighted': highlightedCellsWalkwayBottom[index]}"
                                          [attr.data-index]="index" (mousedown)="$event.preventDefault()"
                                          (touchstart)="$event.preventDefault()"></div>
                                        }
                                      </div>
                                    </div>
                                    <div class="outer-right">
                                    </div>
                                  </div>
                                  <!-- Bottom part of the outer layer -->
                                  <div class="outer-bottom">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-0 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.FRONT_REMARKS, surveyForm?.get('frame_type.frontRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.frontRemarks')?.value">
                                @if (surveyForm?.get('frame_type.frontRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.FRONT_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsFront, $event)">
                                <mat-icon>cached</mat-icon>
                              </button>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/front_side.png"
                                class="img-fluid">
                              <div class="grid-overlay-square" (mousedown)="startDrawing(highlightedCellsFront, $event)"
                                (mousemove)="draw(highlightedCellsFront, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsFront, $event)"
                                (touchmove)="draw(highlightedCellsFront, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cellsSquare; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsFront[index], 'disabled-cell': isDisabledSquare(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledSquare(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledSquare(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                            </div>
                          </div>
                          <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-0 align-center">
                            <div>
                              <span
                                (click)="editRemarks($event, translatedLangText.BOTTOM_REMARKS, surveyForm?.get('frame_type.bottomRemarks'))"
                                class="link-button font-bold"
                                [matTooltip]="surveyForm?.get('frame_type.bottomRemarks')?.value">
                                @if (surveyForm?.get('frame_type.bottomRemarks')?.value) {
                                *
                                }
                                {{translatedLangText.BOTTOM_SIDE}}
                              </span>
                              <button mat-icon-button class="link-button"
                                (click)="resetDialog(highlightedCellsBottom, $event)">
                                <mat-icon>cached</mat-icon>
                              </button>
                            </div>
                            <div class="image-container">
                              <img mat-card-image src="assets/images/idms/tank_frame_type/bottom_side.png"
                                class="img-fluid">
                              <div class="grid-overlay" (mousedown)="startDrawing(highlightedCellsBottom, $event)"
                                (mousemove)="draw(highlightedCellsBottom, $event)" (mouseup)="stopDrawing()"
                                (mouseleave)="stopDrawing()" (touchstart)="startDrawing(highlightedCellsBottom, $event)"
                                (touchmove)="draw(highlightedCellsBottom, $event)" (touchend)="stopDrawing()"
                                (touchcancel)="stopDrawing()">
                                @for (cell of cells; track cell; let index = $index) {
                                <div
                                  [ngClass]="{ highlighted: highlightedCellsBottom[index], 'disabled-cell': isDisabledRect(index) }"
                                  [attr.data-index]="index"
                                  (mousedown)="!isDisabledRect(index) && $event.preventDefault()"
                                  (touchstart)="!isDisabledRect(index) && $event.preventDefault()">
                                </div>
                                }
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row m-t-10">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header">
                              <h2>
                                {{translatedLangText.TANK_PHOTOS}}
                              </h2>
                            </div>
                            <div class="body">
                              @if (igDS.loading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(igDS.loading$ | async)) {
                              <div class="row">
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
                                  <div class="image-previews-tank">
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.LEFT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.leftImage')?.get('preview')?.value && fileInputLeft.click()">
                                        <input type="file" #fileInputLeft class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.leftImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.leftImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.leftImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 0)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.leftImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.REAR_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.rearImage')?.get('preview')?.value && fileInputRear.click()">
                                        <input type="file" #fileInputRear class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.rearImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.rearImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.rearImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 1)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.rearImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.RIGHT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.rightImage')?.get('preview')?.value && fileInputRight.click()">
                                        <input type="file" #fileInputRight class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.rightImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.rightImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.rightImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 2)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.rightImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.TOP_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.topImage')?.get('preview')?.value && fileInputTop.click()">
                                        <input type="file" #fileInputTop class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.topImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.topImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.topImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 3)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.topImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.FRONT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.frontImage')?.get('preview')?.value && fileInputFront.click()">
                                        <input type="file" #fileInputFront class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.frontImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.frontImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.frontImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 4)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.frontImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.BOTTOM_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('frame_type.bottomImage')?.get('preview')?.value && fileInputBottom.click()">
                                        <input type="file" #fileInputBottom class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('frame_type.bottomImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img
                                          [src]="surveyForm?.get('frame_type.bottomImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('frame_type.bottomImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 5)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('frame_type.bottomImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              }
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header">
                              <h2 class="d-flex">
                                {{translatedLangText.DAMAGE_PHOTOS}}
                                <div class="m-l-10">
                                  <button mat-mini-fab class="bg-purple msr-2" (click)="fileInput.click()">
                                    <i class="material-icons">attach_file</i>
                                  </button>
                                  <input type="file" #fileInput class="default d-none" multiple accept="image/*"
                                    (change)="onFileSelected($event)">
                                </div>
                              </h2>
                            </div>
                            <div class="body">
                              @if (isImageLoading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @else {
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
                                  <div class="image-previews" formArrayName="dmgImages">
                                    @for (img of dmgImages().controls; track img; let index = $index) {
                                    <div [formGroupName]="index">
                                      <div class="image-preview">
                                        <img [src]="img.get('preview')?.value" alt="Image Preview" class="preview-img">
                                        @if (img.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, index + 6)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item (click)="deleteDialogDmgImg(img, index, $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    }
                                  </div>
                                </div>
                              </div>
                              }
                            </div>
                          </div>
                        </div>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                          <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                            <mat-icon>chevron_left</mat-icon>
                          </button>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2">
                            <mat-icon>chevron_right</mat-icon>
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step>
                  <!-- <mat-step [stepControl]="getPhotosFormGroup()" [completed]="this.in_gate?.in_gate_survey?.guid">
                    <form [formGroup]="getPhotosFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.PHOTOS}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <div class="row">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header">
                              <h2>
                                {{translatedLangText.TANK_PHOTOS}}
                              </h2>
                            </div>
                            <div class="body">
                              @if (igDS.loading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(igDS.loading$ | async)) {
                              <div class="row">
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
                                  <div class="image-previews-tank">
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.LEFT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.leftImage')?.get('preview')?.value && fileInputLeft.click()">
                                        <input type="file" #fileInputLeft class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.leftImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.leftImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.leftImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 0)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.leftImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.REAR_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.rearImage')?.get('preview')?.value && fileInputRear.click()">
                                        <input type="file" #fileInputRear class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.rearImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.rearImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.rearImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 1)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.rearImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.RIGHT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.rightImage')?.get('preview')?.value && fileInputRight.click()">
                                        <input type="file" #fileInputRight class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.rightImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.rightImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.rightImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 2)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.rightImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.TOP_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.topImage')?.get('preview')?.value && fileInputTop.click()">
                                        <input type="file" #fileInputTop class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.topImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.topImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.topImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 3)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.topImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.FRONT_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.frontImage')?.get('preview')?.value && fileInputFront.click()">
                                        <input type="file" #fileInputFront class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.frontImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.frontImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.frontImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 4)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.frontImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    <div>
                                      <div class="row">
                                        <div
                                          class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-0 align-center">
                                          {{translatedLangText.BOTTOM_SIDE}}
                                        </div>
                                      </div>
                                      <div class="image-preview"
                                        (click)="!surveyForm?.get('photos.bottomImage')?.get('preview')?.value && fileInputBottom.click()">
                                        <input type="file" #fileInputBottom class="default d-none" accept="image/*"
                                          (change)="onFileSelectedTankSide($event, surveyForm?.get('photos.bottomImage'))">
                                        @if (!(isImageLoading$ | async)) {
                                        <img [src]="surveyForm?.get('photos.bottomImage')?.get('preview')?.value || defaultImg"
                                          alt="Image Preview" class="preview-img border-0">
                                        }
                                        @else {
                                        <div class="tbl-spinner">
                                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                          </mat-progress-spinner>
                                        </div>
                                        }
                                        @if (surveyForm?.get('photos.bottomImage')?.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, 5)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item
                                            (click)="deleteDialog(surveyForm?.get('photos.bottomImage'), $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              }
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header">
                              <h2 class="d-flex">
                                {{translatedLangText.DAMAGE_PHOTOS}}
                                <div class="m-l-10">
                                  <button mat-mini-fab class="bg-purple msr-2" (click)="fileInput.click()">
                                    <i class="material-icons">attach_file</i>
                                  </button>
                                  <input type="file" #fileInput class="default d-none" multiple accept="image/*"
                                    (change)="onFileSelected($event)">
                                </div>
                              </h2>
                            </div>
                            <div class="body">
                              @if (isImageLoading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @else {
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
                                  <div class="image-previews" formArrayName="dmgImages">
                                    @for (img of dmgImages().controls; track img; let index = $index) {
                                    <div [formGroupName]="index">
                                      <div class="image-preview">
                                        <img [src]="img.get('preview')?.value" alt="Image Preview" class="preview-img">
                                        @if (img.get('preview')?.value) {
                                        <button [matMenuTriggerFor]="menu" class="link-button menu-button"
                                          (click)="$event.stopPropagation()">
                                          <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu">
                                          <button mat-menu-item (click)="previewImagesDialog($event, index + 6)">
                                            <mat-icon>remove_red_eye</mat-icon>{{translatedLangText.PREVIEW}}
                                          </button>
                                          <button mat-menu-item (click)="deleteDialogDmgImg(img, index, $event)">
                                            <mat-icon>cancel</mat-icon>{{translatedLangText.DELETE}}
                                          </button>
                                        </mat-menu>
                                        }
                                      </div>
                                    </div>
                                    }
                                  </div>
                                </div>
                              </div>
                              }
                            </div>
                          </div>
                        </div>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
                          <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                            <mat-icon>chevron_left</mat-icon>
                          </button>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2">
                            <mat-icon>chevron_right</mat-icon>
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step> -->
                  <mat-step [stepControl]="getCompartmentTypeFormGroup()"
                    [completed]="this.in_gate?.in_gate_survey?.guid ? true : getCompartmentTypeFormGroup().valid">
                    <form [formGroup]="getCompartmentTypeFormGroup()">
                      <ng-template matStepLabel>
                        <div class="mat-step-text-label">
                          {{translatedLangText.COMPARTMENT_TYPE}}
                        </div>
                      </ng-template>
                      <div class="body">
                        @if (igDS.loading$ | async) {
                        <div class="tbl-spinner">
                          <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                          </mat-progress-spinner>
                        </div>
                        }
                        @if (!(igDS.loading$ | async)) {
                        <mat-stepper class="example-stepper" [orientation]="(compTypeStepperOrientation | async)!">
                          <mat-step [stepControl]="getBottomFormGroup()"
                            [completed]="this.in_gate?.in_gate_survey?.guid ? true : getBottomFormGroup().valid">
                            <form [formGroup]="getBottomFormGroup()">
                              <ng-template matStepLabel>{{translatedLangText.BOTTOM}}</ng-template>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.BOTTOM_DIS_COMP}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="btm_dis_comp_cv">
                                    @for (codeValue of disCompCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.FOOT_VALVE}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="foot_valve_cv">
                                    @for (codeValue of footValveCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                                @if (displayOthers(getBottomFormGroup().get('foot_valve_cv')?.value)) {
                                <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="foot_valve_oth" />
                                    @if (getBottomFormGroup().get('foot_valve_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.BRAND}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="btm_valve_brand_cv">
                                    @for (codeValue of valveBrandCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.BOTTOM_DIS_VALVE}}</mat-label>
                                    <mat-select formControlName="btm_dis_valve_cv">
                                      @for (codeValue of disValveCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getBottomFormGroup().get('btm_dis_valve_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.BOTTOM_DIS_VALVE}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getBottomFormGroup().get('btm_dis_valve_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="btm_dis_valve_oth" />
                                    @if (getBottomFormGroup().get('btm_dis_valve_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.BOTTOM_DIS_VALVE}}
                                      {{translatedLangText.SPECIFICATION}}</mat-label>
                                    <mat-select formControlName="btm_dis_valve_spec_cv">
                                      @for (codeValue of disValveSpecCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getBottomFormGroup().get('btm_dis_valve_spec_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.BOTTOM_DIS_VALVE}} {{translatedLangText.SPECIFICATION}}
                                      {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getBottomFormGroup().get('btm_dis_valve_spec_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="btm_dis_valve_spec_oth" />
                                    @if (getBottomFormGroup().get('btm_dis_valve_spec_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.THERMOMETER}}</mat-label>
                                    <input matInput formControlName="thermometer" type="number"
                                      (wheel)="preventDefault($event)">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>&deg;C</h6>
                                    @if (getBottomFormGroup().get('thermometer')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.THERMOMETER}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.SPECIFICATION}}</mat-label>
                                    <mat-select formControlName="thermometer_cv">
                                      @for (codeValue of thermometerCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getBottomFormGroup().get('thermometer_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.SPECIFICATION}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-checkbox formControlName="ladder" class="m-r-5" color="primary">
                                    {{translatedLangText.LADDER}}
                                  </mat-checkbox>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-checkbox formControlName="data_csc_transportplate" class="m-r-5" color="primary">
                                    {{translatedLangText.DATA_SCS_TRANSPORT_PLATE}}
                                  </mat-checkbox>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 align-right">
                                  <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2"
                                    [disabled]="!getBottomFormGroup()!.valid">
                                    <mat-icon>chevron_right</mat-icon>
                                  </button>
                                </div>
                              </div>
                            </form>
                          </mat-step>
                          <mat-step [stepControl]="getTopFormGroup()"
                            [completed]="this.in_gate?.in_gate_survey?.guid ? true : getTopFormGroup().valid">
                            <form [formGroup]="getTopFormGroup()">
                              <ng-template matStepLabel>{{translatedLangText.TOP}}</ng-template>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.TOP_DIS_COMP}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="top_dis_comp_cv">
                                    @for (codeValue of disCompCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.TOP_DIS_VALVE}}</mat-label>
                                    <mat-select formControlName="top_dis_valve_cv">
                                      @for (codeValue of disValveCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getTopFormGroup().get('top_dis_valve_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.TOP_DIS_TOP_DIS_VALVECOMP}}
                                      {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getTopFormGroup().get('top_dis_valve_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="top_dis_valve_oth" />
                                    @if (getTopFormGroup().get('top_dis_valve_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.TOP_DIS_VALVE}}
                                      {{translatedLangText.SPECIFICATION}}</mat-label>
                                    <mat-select formControlName="top_dis_valve_spec_cv">
                                      @for (codeValue of disValveSpecCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getTopFormGroup().get('top_dis_valve_spec_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.SPECIFICATION}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getTopFormGroup().get('top_dis_valve_spec_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="top_dis_valve_spec_oth" />
                                    @if (getTopFormGroup().get('top_dis_valve_spec_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.BRAND}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="top_valve_brand_cv">
                                    @for (codeValue of valveBrandCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.AIRLINE_VALVE}}</mat-label>
                                    <mat-select formControlName="airline_valve_cv">
                                      @for (codeValue of airlineCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getTopFormGroup().get('airline_valve_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.AIRLINE_VALVE}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getTopFormGroup().get('airline_valve_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="airline_valve_oth" />
                                    @if (getTopFormGroup().get('airline_valve_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.PIECES}}</mat-label>
                                    <input matInput formControlName="airline_valve_pcs" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pcs</h6>
                                    @if (getTopFormGroup().get('airline_valve_pcs')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.PIECES}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.DIAMITER}}</mat-label>
                                    <input matInput formControlName="airline_valve_dim" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>inch</h6>
                                    @if (getTopFormGroup().get('airline_valve_dim')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.DIAMITER}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.AIRLINE_VALVE_CONNECTIONS}}</mat-label>
                                    <mat-select formControlName="airline_valve_conn_cv">
                                      @for (codeValue of airlineConnCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getTopFormGroup().get('airline_valve_conn_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.AIRLINE_VALVE_CONNECTIONS}}
                                      {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getTopFormGroup().get('airline_valve_conn_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="airline_valve_conn_oth" />
                                    @if (getTopFormGroup().get('airline_valve_conn_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.AIRLINE_VALVE_CONNECTIONS}}
                                      {{translatedLangText.SPECIFICATION}}</mat-label>
                                    <mat-select formControlName="airline_valve_conn_spec_cv">
                                      @for (codeValue of manlidCoverCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getTopFormGroup().get('airline_valve_conn_spec_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.SPECIFICATION}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getTopFormGroup().get('airline_valve_conn_spec_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="airline_valve_conn_spec_oth" />
                                    @if (getTopFormGroup().get('airline_valve_conn_spec_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                  <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                                    <mat-icon>chevron_left</mat-icon>
                                  </button>
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                                  <button mat-raised-button matStepperNext type="button" color="primary" class="msr-2"
                                    [disabled]="!getTopFormGroup()!.valid">
                                    <mat-icon>chevron_right</mat-icon>
                                  </button>
                                </div>
                              </div>
                            </form>
                          </mat-step>
                          <mat-step [stepControl]="getManlidFormGroup()"
                            [completed]="this.in_gate?.in_gate_survey?.guid ? true : getManlidFormGroup().valid">
                            <form [formGroup]="getManlidFormGroup()">
                              <ng-template matStepLabel>{{translatedLangText.MANLID}}</ng-template>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-label>{{translatedLangText.MANLID_COMPARTMENT}}:</mat-label>
                                </div>
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-radio-group formControlName="manlid_comp_cv">
                                    @for (codeValue of disCompCvList; track codeValue) {
                                    <mat-radio-button [value]="codeValue.code_val" color="primary" ngClass="m-r-25">
                                      {{codeValue.description}}
                                    </mat-radio-button>
                                    }
                                  </mat-radio-group>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.MANLID_COVER}}</mat-label>
                                    <mat-select formControlName="manlid_cover_cv">
                                      @for (codeValue of manlidCoverCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getManlidFormGroup().get('manlid_cover_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.MANLID_COVER}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                @if (displayOthers(getManlidFormGroup().get('manlid_cover_cv')?.value)) {
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.OTHERS}}</mat-label>
                                    <input matInput formControlName="manlid_cover_oth" />
                                    @if (getManlidFormGroup().get('manlid_cover_oth')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.OTHERS}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                }
                              </div>
                              <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.PIECES}}</mat-label>
                                    <input matInput formControlName="manlid_cover_pcs" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pcs</h6>
                                    @if (getManlidFormGroup().get('manlid_cover_pcs')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.PIECES}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.VOLUME}}</mat-label>
                                    <input matInput formControlName="manlid_cover_pts" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pts</h6>
                                    @if (getManlidFormGroup().get('manlid_cover_pts')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.VOLUME}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.MANLID_SEAL}}</mat-label>
                                    <mat-select formControlName="manlid_seal_cv">
                                      @for (codeValue of manlidSealCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getManlidFormGroup().get('manlid_seal_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.MANLID_SEAL}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6 m-b-0 p-r-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.PV}}</mat-label>
                                    <mat-select formControlName="pv_type_cv">
                                      @for (codeValue of pvTypeCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getManlidFormGroup().get('pv_type_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.PV}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6 m-b-0 p-l-1">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.PIECES}}</mat-label>
                                    <input matInput formControlName="pv_type_pcs" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pcs</h6>
                                    @if (getManlidFormGroup().get('pv_type_pcs')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.PIECES}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6 m-b-0 p-r-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.SPECIFICATION}}</mat-label>
                                    <mat-select formControlName="pv_spec_cv">
                                      @for (codeValue of pvSpecCvList; track codeValue) {
                                      <mat-option [value]="codeValue.code_val">{{codeValue.description}}</mat-option>
                                      }
                                    </mat-select>
                                    @if (getManlidFormGroup().get('pv_spec_cv')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.SPECIFICATION}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-6 m-b-0 p-l-1">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.PIECES}}</mat-label>
                                    <input matInput formControlName="pv_spec_pcs" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pcs</h6>
                                    @if (getManlidFormGroup().get('pv_spec_pcs')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.PIECES}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-checkbox formControlName="safety_handrail" class="m-r-5" color="primary">
                                    {{translatedLangText.SAFETY_HANDRAIL}}
                                  </mat-checkbox>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.BUFFER_PLATE}}</mat-label>
                                    <input matInput formControlName="buffer_plate" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>pcs</h6>
                                    @if (getManlidFormGroup().get('buffer_plate')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.BUFFER_PLATE}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-form-field class="example-full-width">
                                    <mat-label>{{translatedLangText.RESIDUE}}</mat-label>
                                    <input matInput formControlName="residue" type="number"
                                      (wheel)="preventDefault($event)" min="0">
                                    <h6 class="color-icon p-t-15 p-r-5" matSuffix>KG</h6>
                                    @if (getManlidFormGroup().get('residue')?.hasError('required')) {
                                    <mat-error>
                                      {{translatedLangText.RESIDUE}} {{translatedLangText.SO_REQUIRED}}
                                    </mat-error>
                                    }
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <mat-checkbox formControlName="dipstick" class="m-r-5" color="primary">
                                    {{translatedLangText.DIPSTICK}}
                                  </mat-checkbox>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                  <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                                    <mat-icon>chevron_left</mat-icon>
                                  </button>
                                </div>
                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                                </div>
                              </div>
                            </form>
                          </mat-step>
                        </mat-stepper>
                        }
                      </div>
                      <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-xs-6">
                          <button mat-raised-button matStepperPrevious type="button" color="" class="msr-2">
                            <mat-icon>chevron_left</mat-icon>
                          </button>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 align-right">
                          <!-- <ng-container #dynamicContainer></ng-container> -->
                          @if (canDownload()) {
                          <button mat-raised-button matStepperNext class="msr-2"
                            [disabled]="(igsDS.actionLoading$| async) || (isImageLoading$| async) || (isFileActionLoading$| async)"
                            (click)="onDownload()">
                            <mat-icon>
                              @if (!(igsDS.actionLoading$ | async) && !(isImageLoading$| async) &&
                              !(isFileActionLoading$| async)) {
                              download
                              } @else {
                              <mat-spinner color="primary" [diameter]="18"></mat-spinner>
                              }
                            </mat-icon>
                            {{translatedLangText.DOWNLOAD}}
                          </button>
                          }
                          @if (canPublish()) {
                          <button mat-raised-button matStepperNext color="accent" class="msr-2"
                            [disabled]="(igsDS.actionLoading$| async) || (isImageLoading$| async) || (isFileActionLoading$| async)"
                            (click)="onPublishCheck($event)">
                            <mat-icon>
                              @if (!(igsDS.actionLoading$ | async) && !(isImageLoading$| async) &&
                              !(isFileActionLoading$| async)) {
                              publish
                              } @else {
                              <mat-spinner color="primary" [diameter]="18"></mat-spinner>
                              }
                            </mat-icon>
                            {{translatedLangText.PUBLISH}}
                          </button>
                          }
                          <button mat-raised-button matStepperNext color="primary" class="msr-2"
                            [disabled]="(igsDS.actionLoading$| async) || (isFileActionLoading$| async)"
                            (click)="onSubmitCheck($event)">
                            <mat-icon>
                              @if (!(igsDS.actionLoading$ | async) && !(isFileActionLoading$| async)) {
                              save
                              } @else {
                              <mat-spinner color="primary" [diameter]="18"></mat-spinner>
                              }
                            </mat-icon>
                            {{translatedLangText.SAVE}}
                          </button>
                        </div>
                      </div>
                    </form>
                  </mat-step>
                </mat-stepper>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>