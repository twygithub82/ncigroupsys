<div class="addContainer">
  <div class="modalHeader">
    <div class="editRowModal">
      <div class="modalHeader clearfix">
        <h3>{{dialogTitle}}</h3>
      </div>
    </div>
    <button mat-icon-button (click)="dialogRef.close()" class="modal-close-button" aria-label="Close dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div mat-dialog-content>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        FILTER
      </div>
    </div>
    <div class="body overflow-auto">
      @for(row of sotList; track row){
      <mat-card [ngClass]="{'card-content p-0 m-b-10': true}" matRipple>
        <mat-card-header class="pt-2 pe-2 pb-0 d-flex justify-content-between align-items-center"
          (click)="toggleRow(row)">
          <mat-card-title [ngClass]="{'pt-1': true}">
            <mat-checkbox (change)="$event ? toggleRow(row) : null" [checked]="sotSelection.isSelected(row)"
              class="card-checkbox" (click)="$event.stopPropagation()" [disabled]="checkScheduling(row.scheduling)">
            </mat-checkbox>
            {{row.tank_no}}
            @if (checkScheduling(row.scheduling)){
            <div [ngClass]="'badge badge-solid-green ms-1'">{{data.translatedLangText.SCHEDULED}}</div>
            }
            @else if (checkBooking(row.booking)){
            <div [ngClass]="'badge badge-solid-orange ms-1'">{{data.translatedLangText.BOOKED}}</div>
            }
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="row" (click)="toggleRow(row)">
            <div class="col-xl-2-5 col-lg-2-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.CUSTOMER}}:</span> {{
              ccDS.displayName(row.storing_order?.customer_company)}}
            </div>
            <div class="col-xl-2 col-lg-2 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.EIR_NO}}:</span> {{row.in_gate?.eir_no}}
            </div>
            <div class="col-xl-1-5 col-lg-1-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.EIR_DATE}}:</span> {{row.in_gate?.eir_dt}}
            </div>
            <div class="col-xl-1-5 col-lg-1-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.CAPACITY}}:</span> {{
              row.in_gate?.in_gate_survey?.capacity}}
            </div>
            <div class="col-xl-1-5 col-lg-1-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.TARE_WEIGHT}}:</span> {{
              row.in_gate?.in_gate_survey?.tare_weight}}
            </div>
            <div class="col-xl-1-5 col-lg-1-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.STATUS}}:</span>
              {{getTankStatusDescription(row.tank_status_cv)}}
            </div>
            <div class="col-xl-1-5 col-lg-1-5 col-md-6 col-sm-6 mb-1">
              <span class="font-bold">{{data.translatedLangText.YARD}}:</span>
              {{getYardDescription(row.in_gate?.yard_cv)}}
            </div>
          </div>
        </mat-card-content>
        <mat-card-actions [ngClass]="'empty-card-actions'">
        </mat-card-actions>
      </mat-card>
      }
      @if (!(sotDS.loading$ | async) && !sotList.length) {
      <mat-divider></mat-divider>
      <div class="no-results m-l-20 pt-3" [style.display]="sotList.length === 0 ? '' : 'none'">
        <h5 class="m-b-15">{{data.translatedLangText.NO_RESULT}}</h5>
      </div>
      }
      @if (sotDS.loading$ | async) {
      <div class="tbl-spinner">
        <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
        </mat-progress-spinner>
      </div>
      }
    </div>
  </div>
  <div mat-dialog-actions class="mb-3 align-right">
    <button mat-flat-button color="primary" (click)="onNoClick()">{{data.translatedLangText.ADD | translate}}</button>
    <button mat-flat-button (click)="onNoClick()" tabindex="-1">{{data.translatedLangText.CLOSE}}</button>
  </div>
</div>