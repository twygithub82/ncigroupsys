<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="pageTitle" [items]="breadcrumsMiddleList"
        [active_item]="langText.DETAILS"></app-breadcrumb>
    </div>
    <!-- <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card l-bg-{{this.getBackgroundColorFromNature()}} pt-1 pb-1">
          <div class="body">
            <mat-card-content class="d-flex align-items-center text-white">
              <mat-icon>error</mat-icon>
              <mat-label class="m-l-10">{{this.getNatureInGateAlert()}}</mat-label>
            </mat-card-content>
          </div>
        </div>
      </div>
    </div> -->
    <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card p-0 tlx-card">
          <mat-accordion>
            <mat-expansion-panel [expanded]="true" [disabled]="true" hideToggle>
              <mat-expansion-panel-header class="ps-0">
                <mat-panel-title>
                  <div class="d-flex justify-content-between align-items-center w-100">
                    <div class="header">
                      <h2>
                        {{translatedLangText.TANK_SUMMARY_DETAILS}}
                      </h2>
                    </div>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="body p-l-0 p-r-0">
                @if (igDS.loading$ | async) {
                <div class="tbl-spinner">
                  <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                  </mat-progress-spinner>
                </div>
                }
                @if (!(igDS.loading$ | async)) {
                <mat-card-content>
                  <div class="position-relative">
                    @if(allowPerformAction()) {
                    <div class="relative-menu">
                      @if (!(cvDS.loading$ | async) && (canOverwriteLastCargo() || canOverwriteCleanStatus())) {
                      <button mat-mini-fab color="primary" [matMenuTriggerFor]="menu"
                        [disabled]="(pdDS.actionLoading$ | async)" class="me-2">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <mat-menu #menu="matMenu">
                        @if (canOverwriteLastCargo()) {
                        <button mat-menu-item
                          (click)="overwriteLastCargoDialog($event)">{{translatedLangText.OVERWRITE_LAST_CARGO}}</button>
                        }
                        @if (canOverwriteCleanStatus()) {
                        <button mat-menu-item
                          (click)="overwriteCleanStatusDialog($event)">{{translatedLangText.OVERWRITE_CONDITION}}</button>
                        }
                      </mat-menu>
                      }
                    </div>
                    }
                    <!-- <div class="row justify-content-center">
                      <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-152 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.TANK_NO}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">{{sot?.tank_no}}</div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.CUSTOMER}}:</span>
                            <span
                              class="contact-detail-info font-bold">{{ccDS.displayName(sot?.storing_order?.customer_company)}}</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{ccDS.displayName(sot?.storing_order?.customer_company)}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.LAST_CARGO}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">{{sot?.tariff_cleaning?.cargo}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.OWNER}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{ccDS.displayName(sot?.customer_company)}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.PURPOSE}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{displayTankPurpose(sot!)}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.CURRENT_STATUS}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">{{getTankStatusDescription(sot?.tank_status_cv)}}
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xl-4 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.EIR_NO}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{igDS.getInGateItem(sot?.in_gate)?.eir_no || "-"}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.EIR_DATE}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{displayDateTime(igDS.getInGateItem(sot?.in_gate)?.eir_dt) || "-"}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.LAST_TEST}}:</span>
                            <span class="contact-detail-info font-bold">{{last_test_desc || '-'}}</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{last_test_desc || '-'}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.NEXT_TEST}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">{{next_test_desc || '-'}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.CLEAN_STATUS}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">
                              {{getCleanStatusDescription(sot?.clean_status_cv)}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5">
                            <span class="contact-detail-label">{{translatedLangText.YARD}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                            <div class="contact-detail-info font-bold">{{getYardDescription(tiItem?.yard_cv)}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div> -->
                    <div class="row justify-content-center">
                      <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                            <span>{{translatedLangText.TANK_NO}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                            <div class="contact-detail-info font-bold">{{sot?.tank_no}}
                            </div>
                          </div>
                        </div>
                        
                        <div class="row">
                          <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                            <span>{{translatedLangText.CUSTOMER}}:</span>
                          </div>
                          <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                            <div class="contact-detail-info font-bold">{{ccDS.displayName(sot?.storing_order?.customer_company)}}
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.LAST_CARGO}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{sot?.tariff_cleaning?.cargo}}
                              </div>
                            </div>
                          
                        </div>
                        <div class="row">
                          
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.OWNER}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{ccDS.displayName(sot?.customer_company)}}
                              </div>
                            </div>
                          
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.PURPOSE}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{displayTankPurpose(sot!)}}
                              </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.CURRENT_STATUS}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{getTankStatusDescription(sot?.tank_status_cv)}}
                              </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.EIR_NO}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{igDS.getInGateItem(sot?.in_gate)?.eir_no ||"-"}}
                              </div>
                            </div>
                        </div>
                        <div class="row">
                              <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                <span>{{translatedLangText.EIR_DATE}}:</span>
                              </div>
                              <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                                <div class="contact-detail-info font-bold">{{displayDateTime(igDS.getInGateItem(sot?.in_gate)?.eir_dt)|| "-"}}
                                </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.LAST_TEST}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{last_test_desc || '-'}}
                              </div>
                            </div>
                            <!-- <span class="contact-detail-label">{{translatedLangText.LAST_TEST}}:</span>
                            <span class="contact-detail-info font-bold">{{last_test_desc || '-'}}</span> -->
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.NEXT_TEST}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{next_test_desc || '-'}}
                              </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.CLEAN_STATUS}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{getCleanStatusDescription(sot?.clean_status_cv)}}
                              </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.YARD}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 ">
                              <div class="contact-detail-info font-bold">{{getYardDescription(tiItem?.yard_cv)}}
                              </div>
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-card-content>
                }
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card bg-opacity-0 border-0 p-0">
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <mat-accordion multi>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.tank_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.tank_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.TANK_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.tank_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if (igDS.loading$ | async) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(igDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row justify-content-center">
                        <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.UNIT_TYPE}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{sot?.tank?.unit_type}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.CLADDING}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{getCladdingDescription(igs?.cladding_cv) ||
                                "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.TARE_WEIGHT}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{igs?.tare_weight || "-"}} KG
                              </div>
                            </div>
                          </div>
                          <!-- <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                              <span>{{translatedLangText.LAST_TEST}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{last_test_desc || '-'}}
                              </div>
                            </div>
                          </div> -->
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.BOTTOM_DIS_TYPE}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{getDisCompDescription(igs?.btm_dis_comp_cv)
                                || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 pt-2 pb-2 m-b-5 align-right p-0">
                              <span>{{translatedLangText.NOTES}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2">{{sot?.tank_note || "-"}}</span>
                                <mat-icon color="primary" class="cursor-pointer"
                                  (click)="editTankNotes($event)">mode_edit</mat-icon>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.RELEASE_NOTES}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2">{{sot?.release_note || "-"}}</span>
                                <mat-icon color="primary" class="cursor-pointer"
                                  (click)="editTankNotes($event)">mode_edit</mat-icon>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.MANUFACTURER_DOM}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{igs?.manufacturer_cv || "-"}}
                                {{displayDate(igs?.dom_dt)}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.CAPACITY}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{igs?.capacity || "-"}} Liters
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.MAX_GROSS_WEIGHT}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">
                                {{getMaxGrossWeightDescription(igs?.max_weight_cv) || "-"}}
                              </div>
                            </div>
                          </div>
                          <!-- <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                              <span>{{translatedLangText.NEXT_TEST}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{next_test_desc || '-'}}
                              </div>
                            </div>
                          </div> -->
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.COMPARTMENT_TYPE}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{igs?.tariff_buffer?.buffer_type || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.WALKWAY}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{getWalkwayDescription(igs?.walkway_cv) ||
                                "-"}}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.gate_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.gate_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.GATE_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.gate_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if ((igDS.loading$ | async) || (ogDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(igDS.loading$ | async) && !(ogDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row justify-content-center">
                        <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold underline-border">{{translatedLangText.IN_GATE}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.SO_RO}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{sot?.storing_order?.so_no || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.JOB_NO}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{sot?.job_no || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.DATE}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">{{displayDateTime(ig?.create_dt) || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 pt-2 pb-2 m-b-5 align-right p-0">
                              <span>{{translatedLangText.HAULIER}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2">{{ig?.haulier || "-"}}</span>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.VEHICLE_NO}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2"> {{ig?.vehicle_no || "-"}}</span>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.DRIVER_NAME}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2"> {{ig?.driver_name || "-"}}</span>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span>{{translatedLangText.REMARKS}}:</span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5 d-flex align-items-center">
                              <div class="contact-detail-info font-bold d-flex align-items-center">
                                <span class="me-2"> {{ig?.remarks || "-"}}</span>
                              </div>
                            </div>
                          </div>
                        </div>
                         <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold underline-border">{{translatedLangText.OUT_GATE}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{sot?.release_order_sot?.[0]?.release_order?.ro_no || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold">
                                {{sot?.release_job_no || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{displayDateTime(og?.create_dt) || "-"}}
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{og?.haulier || "-"}}
                              </div>
                            </div>
                          </div>
                           <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{og?.vehicle_no || "-"}}
                              </div>
                            </div>
                          </div>
                           <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{og?.driver_name || "-"}}
                              </div>
                            </div>
                          </div>
                           <div class="row">
                            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                              <span></span>
                            </div>
                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                              <div class="contact-detail-info font-bold"> {{og?.remarks || "-"}}
                              </div>
                            </div>
                          </div>
                        </div>
                     </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.purpose_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.purpose_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.PURPOSE}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.purpose_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-t-0 p-l-0 p-r-0">
                    <mat-card-content>
                      <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                          <mat-tab-group class="tlx-mdc-tab-group" dynamicHeight>
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  <mat-icon class="m-r-5">storage</mat-icon>{{ translatedLangText.STORAGE }}
                                </span>
                              </ng-template>
                              @if ((pdDS.loading$ | async) || (sotDS.loading$ | async) || (sotDS.actionLoading$ |
                              async)) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(pdDS.loading$ | async) && !(sotDS.loading$ | async) && !(sotDS.actionLoading$ |
                              async)) {
                              @if (sot?.purpose_storage) {
                              <div class="position-relative">
                                <div class="row justify-content-center pt-5">
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(pdDS.getStorageBeginDate(sot!, pdItem!)) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.STORAGE_DAYS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">{{pdDS.getStorageDays(sot!, pdItem!)
                                          ||
                                          "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.AVAILABLE_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">{{getAvailableDate(sot!) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <!-- <div class="row">
                                        <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                          <span>{{translatedLangText.ETR_DATE}}:</span>
                                        </div>
                                        <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                          <div class="contact-detail-info font-bold">{{convertDisplayDate(sot?.etr_dt) ||
                                            "-"}}
                                          </div>
                                        </div>
                                      </div> -->
                                  </div>
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.RELEASE_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(ogDS.getOutGateItem(sot?.out_gate)?.create_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.FREE_STORAGE_DAYS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">{{pdItem?.free_storage || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.STORAGE_CALCULATE_BY}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{getStorageCalDescription(pdItem?.storage_cal_cv) ?? "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              }
                              @else {
                              <div class="empty-purpose">
                                <mat-icon class="icon-large">error_outline</mat-icon>
                                <span class="mb-3">{{translatedLangText.NO_STORAGE_PURPOSE}}</span>
                                @if (canAddPurpose('storage')) {
                                <button mat-flat-button color="primary"
                                  (click)="updatePurposeDialog($event, 'storage', 'add')">
                                  <mat-icon>
                                    add
                                  </mat-icon>
                                  {{translatedLangText.ADD_STORAGE_PURPOSE}}
                                </button>
                                }
                              </div>
                              }
                              }
                            </mat-tab>
                            @if(allowPerformAction()){
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  <!-- <i class="fas fa-thermometer-half fa-icon m-r-5"></i>{{ translatedLangText.STEAM }} -->
                                  <mat-icon class="m-r-5">whatshot</mat-icon>{{ translatedLangText.STEAM }}
                                </span>
                              </ng-template>
                              @if ((pdDS.loading$ | async) || (sotDS.loading$ | async) || (sotDS.actionLoading$ |
                              async)) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(pdDS.loading$ | async) && !(sotDS.loading$ | async) && !(sotDS.actionLoading$ |
                              async)) {
                              @if (sot?.purpose_steam) {
                              <div class="position-relative">
                                @if (!isNoPurpose(sot!, 'steaming') && canRemovePurpose('steaming')) {
                                <button color="warn" [matTooltip]="translatedLangText.REMOVE_STEAM_PURPOSE"
                                  (click)="updatePurposeDialog($event, 'steaming', 'remove')"
                                  class="link-button text-danger position-absolute top-0 end-0 p-0">
                                  <mat-icon>cancel</mat-icon>
                                </button>
                                }
                                <div class="row justify-content-center pt-5">
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(steamDS.getSteamBeginDate(steamItem)) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.COMPLETE_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(steamDS.getSteamCompleteDate(steamItem)) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                    <div class="responsive_table">
                                      <table mat-table [dataSource]="steamItem" matSort
                                        class="mat-cell advance-tab-table striped-rows hover-highlight dark-header ">
                                        <ng-container matColumnDef="id">
                                          <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                          <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="estimate_no">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_5-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.ESTIMATE_NO}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_5-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.ESTIMATE_NO}}:</span>
                                            <span class="me-1">{{row.estimate_no}}</span>
                                            @if (isAutoApproveSteaming(row)) {
                                            <mat-icon>whatshot</mat-icon>
                                            }
                                            @else {
                                            <mat-icon>build</mat-icon>
                                            }
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="degree_celsius">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-0_5-xl tbl-col-width-per-0_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.DEGREE_CELSIUS_SYMBOL}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-0_5-xl tbl-col-width-per-0_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.DEGREE_CELSIUS_SYMBOL}}:</span>{{steamDS.getSteamHighestTemp(row)}}
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="estimate_date">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.ESTIMATE_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.ESTIMATE_DATE}}:</span>
                                            <span>{{displayDate(row.create_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="approve_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.APPROVED_NO_ACTION}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.APPROVED_NO_ACTION}}:</span>
                                            <span>{{displayDate(row.approve_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="begin_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_25-xl tbl-col-width-per-1_25-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.BEGIN_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_25-xl tbl-col-width-per-1_25-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.BEGIN_DATE}}:</span>
                                            <span>{{displayDate(row.approve_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="complete_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.COMPLETE_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.COMPLETE_DATE}}:</span>
                                            <span>{{displayDate(row.complete_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="status_cv">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.STATUS}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getProcessStatusDescription(row?.status_cv)}}
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="bill">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-0_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.BILL}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-0_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.BILL}}:</span>
                                            @if (row?.customer_billing_guid) {
                                            <mat-icon
                                              class="material-icons-two-tone col-green font-bold m-l-0">checked</mat-icon>
                                            }
                                            @else {
                                            <mat-icon
                                              class="material-icons-two-tone col-red font-bold m-l-0">close</mat-icon>
                                            }
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="actions">
                                          <mat-header-cell
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-0_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'"
                                            *matHeaderCellDef>
                                          </mat-header-cell>
                                          <mat-cell *matCellDef="let row; let i=index;"
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-0_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm pr-0 justify-content-end'">
                                            @if (canRollbackSteamingCompleted(row)) {
                                            <button mat-icon-button [matMenuTriggerFor]="menu"
                                              (click)="stopEventTrigger($event)">
                                              <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #menu="matMenu">
                                              @if (canRollbackSteamingCompleted(row)) {
                                              <button mat-menu-item (click)="onRollbackSteamingJobs($event, row)">
                                                <mat-icon>undo</mat-icon>
                                                <span>{{translatedLangText.REINSTATE}}</span>
                                              </button>
                                              }
                                            </mat-menu>
                                            }
                                          </mat-cell>
                                        </ng-container>
                                        <mat-header-row *matHeaderRowDef="displayedColumnsSteaming"></mat-header-row>
                                        <mat-row *matRowDef="let row; columns: displayedColumnsSteaming;"
                                          (click)="steamHeatingLogDialog($event, row)" [style.cursor]="'pointer'"
                                          matRipple>
                                        </mat-row>
                                      </table>
                                    </div>
                                    <!-- No result -->
                                    @if (!(steamDS.loading$ | async) && !steamItem.length) {
                                    <div class="no-results">
                                      <mat-divider></mat-divider>
                                      <div class="no-results m-l-20 pt-3">
                                        <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                                      </div>
                                    </div>
                                    }
                                    <!-- Loading spinner -->
                                    @if (steamDS.loading$ | async) {
                                    <div class="tbl-spinner">
                                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                      </mat-progress-spinner>
                                    </div>
                                    }
                                  </div>
                                </div>
                              </div>
                              }
                              @else{
                              <div class="empty-purpose">
                                <mat-icon class="icon-large">error_outline</mat-icon>
                                <span class="mb-3">{{translatedLangText.NO_STEAM_PURPOSE}}</span>
                                @if (canAddPurpose('steaming')) {
                                <button mat-flat-button color="primary"
                                  (click)="updatePurposeDialog($event, 'steaming', 'add')">
                                  <mat-icon>
                                    add
                                  </mat-icon>
                                  {{translatedLangText.ADD_STEAM_PURPOSE}}
                                </button>
                                }
                              </div>
                              }
                              }
                            </mat-tab>

                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  <!-- <i class="fas fa-trash fa-icon m-r-5"></i>{{ translatedLangText.RESIDUE }} -->
                                  <mat-icon class="m-r-5">delete</mat-icon>{{ translatedLangText.RESIDUE }}
                                </span>
                              </ng-template>
                              @if ((residueDS.loading$ | async) || (sotDS.loading$ | async) || (sotDS.actionLoading$ |
                              async)) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(residueDS.loading$ | async) && !(sotDS.loading$ | async) && !(sotDS.actionLoading$
                              | async)) {
                              @if (sot?.purpose_cleaning) {
                              <div class="row justify-content-center pt-5">
                                <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                  <div class="row">
                                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                      <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                    </div>
                                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                      <div class="contact-detail-info font-bold">
                                        {{displayDateTime(residueDS.getResidueBeginDate(residueItem)) || "-"}}
                                      </div>
                                    </div>
                                  </div>
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.COMPLETED_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(cleaningItem[0].job_order?.start_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.DEPOT_REFERENCE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{cleaningItem[0].job_no || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.JOB_STATUS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{getProcessStatusDescription(cleaningItem[0].status_cv) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                </div>
                                <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                  <div class="row">
                                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                      <span>{{translatedLangText.COMPLETE_DATE}}:</span>
                                    </div>
                                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                      <div class="contact-detail-info font-bold">
                                        {{displayDateTime(residueDS.getResidueCompleteDate(residueItem)) || "-"}}
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                      <span>{{translatedLangText.PROCESSING_DAYS}}:</span>
                                    </div>
                                    <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                      <div class="contact-detail-info font-bold">
                                        {{residueDS.getResidueProcessingDays(repairItem) || "-"}}
                                      </div>
                                    </div>
                                  </div>
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.APPROVED_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(cleaningItem[0].approve_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.RESIDUE_QUANTITY}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(ogDS.getOutGateItem(sot?.out_gate)?.create_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.CUSTOMER_REFERENCE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(ogDS.getOutGateItem(sot?.out_gate)?.create_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                  <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.BILL}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold d-flex align-items-center">
                                          @if (false) {
                                          <mat-icon
                                            class="material-icons-two-tone col-green font-bold m-l-0">check</mat-icon>
                                          }
                                          @else {
                                          <mat-icon
                                            class="material-icons-two-tone col-red font-bold m-l-0">close</mat-icon>
                                          }
                                        </div>
                                      </div>
                                    </div> -->
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                  <div class="responsive_table">
                                    <table mat-table [dataSource]="residueItem" matSort
                                      class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                                      <ng-container matColumnDef="id">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                        <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="estimate_no">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.ESTIMATE_NO}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span
                                            class="mobile-tab-label">{{translatedLangText.ESTIMATE_NO}}:</span>{{row.estimate_no}}
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="estimate_date">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.ESTIMATE_DATE}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span class="mobile-tab-label">{{translatedLangText.ESTIMATE_DATE}}:</span>
                                          <span>{{displayDate(row.create_dt) ?? "-"}}</span>
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="approve_dt">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.APPROVED_NO_ACTION}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span
                                            class="mobile-tab-label">{{translatedLangText.APPROVED_NO_ACTION}}:</span>
                                          <span>{{displayDate(row.approve_dt) ?? "-"}}</span>
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="allocation_dt">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.ALLOCATION_DATE}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span class="mobile-tab-label">{{translatedLangText.ALLOCATION_DATE}}:</span>
                                          <span>{{displayDate(row.allocate_dt) ?? "-"}}</span>
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="qc_dt">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.COMPLETED_DATE}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span class="mobile-tab-label">{{translatedLangText.COMPLETED_DATE}}:</span>
                                          <span>{{displayDate(row.complete_dt) ?? "-"}}</span>
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="status_cv">
                                        <mat-header-cell mat-header-cell *matHeaderCellDef
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          {{translatedLangText.STATUS}}
                                        </mat-header-cell>
                                        <mat-cell mat-cell *matCellDef="let row"
                                          [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                          <span
                                            class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getProcessStatusDescription(row?.status_cv)}}
                                        </mat-cell>
                                      </ng-container>
                                      <ng-container matColumnDef="actions">
                                        <mat-header-cell
                                          [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-12-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'"
                                          *matHeaderCellDef>
                                        </mat-header-cell>
                                        <mat-cell *matCellDef="let row; let i=index;"
                                          [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-12-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm pr-0 justify-content-end'">
                                          @if (canRollbackResidueCompleted(row)) {
                                          <button mat-icon-button [matMenuTriggerFor]="menu"
                                            (click)="stopEventTrigger($event)">
                                            <mat-icon>more_vert</mat-icon>
                                          </button>
                                          <mat-menu #menu="matMenu">
                                            @if (canRollbackResidueCompleted(row)) {
                                            <button mat-menu-item (click)="onRollbackResidueJobs($event, row)">
                                              <mat-icon>undo</mat-icon>
                                              <span>{{translatedLangText.REINSTATE}}</span>
                                            </button>
                                            }
                                          </mat-menu>
                                          }
                                        </mat-cell>
                                      </ng-container>
                                      <mat-header-row *matHeaderRowDef="displayedColumnsResidue"></mat-header-row>
                                      <mat-row *matRowDef="let row; columns: displayedColumnsResidue;"
                                        [style.cursor]="'pointer'" matRipple>
                                      </mat-row>
                                    </table>
                                  </div>
                                  <!-- No result -->
                                  @if (!(residueDS.loading$ | async) && !residueItem.length) {
                                  <div class="no-results">
                                    <mat-divider></mat-divider>
                                    <div class="no-results m-l-20 pt-3">
                                      <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                                    </div>
                                  </div>
                                  }
                                  <!-- Loading spinner -->
                                  @if (residueDS.loading$ | async) {
                                  <div class="tbl-spinner">
                                    <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                    </mat-progress-spinner>
                                  </div>
                                  }
                                </div>
                              </div>
                              }
                              @else {
                              <div class="empty-purpose">
                                <mat-icon class="icon-large">error_outline</mat-icon>
                                <span class="mb-3">{{translatedLangText.NO_RESIDUE}}</span>
                              </div>
                              }
                              }
                            </mat-tab>
                            }
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  <!-- <i class="fas fa-magic fa-icon m-r-5"></i>{{ translatedLangText.CLEANING }} -->
                                  <mat-icon class="m-r-5">water_drop</mat-icon>{{ translatedLangText.CLEANING }}
                                </span>
                              </ng-template>
                              @if ((cleaningDS.loading$ | async) || (sotDS.loading$ | async) || (sotDS.actionLoading$ |
                              async)) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                              @if (!(cleaningDS.loading$ | async) && !(sotDS.loading$ | async) && !(sotDS.actionLoading$
                              | async)) {
                              @if (sot?.purpose_cleaning) {
                              <div class="position-relative">
                                @if (canOverwriteCleaningApproval() || canRollbackCleaningCompleted(cleaningItem?.[0])
                                || canRollbackCleaning(cleaningItem?.[0]) || canRemoveCleanPurpose()) {
                                <button mat-mini-fab color="primary" [matMenuTriggerFor]="menu"
                                  [disabled]="(cleaningDS.loading$ | async)"
                                  class="link-button position-absolute top-0 end-0 p-0">
                                  <mat-icon>edit</mat-icon>
                                </button>

                                <mat-menu #menu="matMenu">
                                  @if (canOverwriteCleaningApproval() && allowPerformAction()) {
                                  <button mat-menu-item
                                    (click)="overwriteCleaningApprovalDialog($event)">{{translatedLangText.OVERWRITE_APPROVAL}}</button>
                                  }
                                  @if (canRollbackCleaningCompleted(cleaningItem?.[0])) {
                                  <button mat-menu-item class=""
                                    (click)="onRollbackCleaningJobs($event, cleaningItem?.[0])">{{translatedLangText.REINSTATE}}</button>
                                  }
                                  @if (canRollbackCleaning(cleaningItem?.[0])) {
                                  <button mat-menu-item class=""
                                    (click)="onRollbackCleaning($event, cleaningItem?.[0])">{{translatedLangText.REINSTATE}}</button>
                                  }
                                  @if (canRemoveCleanPurpose()) {
                                  <button mat-menu-item class=""
                                    (click)="updatePurposeDialog($event, 'cleaning', 'remove')">{{translatedLangText.REMOVE}}</button>
                                  }
                                </mat-menu>
                                }
                                <div class="row justify-content-center pt-5">
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.GATE_IN_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(cleaningItem?.[0]?.create_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.APPROVED_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDate(cleaningItem?.[0]?.approve_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.JOB_STATUS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{getProcessStatusDescription(cleaningItem?.[0]?.status_cv) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.JOB_NO}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{cleaningItem?.[0]?.job_no || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.BILL}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold d-flex align-items-center">
                                          @if (cleaningItem?.[0]?.customer_billing_guid) {
                                          <mat-icon
                                            class="material-icons-two-tone col-green font-bold m-l-0">check</mat-icon>
                                          }
                                          @else {
                                          <mat-icon
                                            class="material-icons-two-tone col-red font-bold m-l-0">close</mat-icon>
                                          }
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.PROCESS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{sot?.tariff_cleaning?.cleaning_method?.name || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <!-- <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.PROCESSING_DAYS}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{cleaningDS.getProcessingDate(cleaningItem?.[0]) || "-"}}
                                        </div>
                                      </div>
                                    </div> -->
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.CLEANING_BAY}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{cleaningItem?.[0]?.job_order?.team?.description || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(cleaningItem?.[0]?.job_order?.start_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.COMPLETE_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(cleaningItem?.[0]?.job_order?.complete_dt) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right">
                                        <span>{{translatedLangText.DURATION_DAY_HR_MIN}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{joDS.getJobOrderDuration(cleaningItem?.[0]?.job_order) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              }
                              @else{
                              <div class="empty-purpose">
                                <mat-icon class="icon-large">error_outline</mat-icon>
                                <span class="mb-3">{{translatedLangText.NO_CLEANING_PURPOSE}}</span>
                                @if (canAddPurpose('cleaning')) {
                                <button mat-flat-button color="primary"
                                  (click)="updatePurposeDialog($event, 'cleaning', 'add')">
                                  <mat-icon>
                                    add
                                  </mat-icon>
                                  {{translatedLangText.ADD_CLEANING_PURPOSE}}
                                </button>
                                }
                              </div>
                              }
                              }
                            </mat-tab>

                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  <mat-icon class="m-r-5">build</mat-icon>{{ translatedLangText.REPAIR }}
                                </span>
                              </ng-template>
                              @if (!(repairDS.loading$ | async) && !(sotDS.loading$ | async) && !(sotDS.actionLoading$ |
                              async)) {
                              @if (sot?.purpose_repair_cv) {
                              <div class="position-relative mt-2">
                                @if (canRemoveRepairPurpose()) {
                                <button mat-mini-fab color="primary" [matMenuTriggerFor]="menu"
                                  [disabled]="(cleaningDS.loading$ | async)"
                                  class="link-button position-absolute top-0 end-0 p-0">
                                  <mat-icon>edit</mat-icon>
                                </button>

                                <mat-menu #menu="matMenu">
                                  @if (canRemoveRepairPurpose()) {
                                  <button mat-menu-item class=""
                                    (click)="updatePurposeDialog($event, 'repair', 'remove')">{{translatedLangText.REMOVE}}</button>
                                  }
                                </mat-menu>
                                }
                                <!-- @if (canRemoveRepairPurpose()) {
                                <button color="warn" [matTooltip]="translatedLangText.REMOVE_REPAIR_PURPOSE"
                                  (click)="updatePurposeDialog($event, 'repair', 'remove')"
                                  class="link-button text-danger position-absolute top-0 end-0 p-0">
                                  <mat-icon>cancel</mat-icon>
                                </button>
                                } -->
                                <div class="row justify-content-center pt-5">
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5 ">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(repairDS.getRepairBeginDate(repairItem)) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.REPAIR_TYPE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{getPurposeOptionDescription(sot!.purpose_repair_cv) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.COMPLETE_DATE}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{displayDateTime(repairDS.getRepairCompleteDate(repairItem)) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-5 align-right p-0">
                                        <span>{{translatedLangText.DURATION}}:</span>
                                      </div>
                                      <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-5">
                                        <div class="contact-detail-info font-bold">
                                          {{repairDS.getRepairProcessingDays(repairItem) || "-"}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                                    <div class="responsive_table">
                                      <table mat-table [dataSource]="repairItem" matSort
                                        class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                                        <ng-container matColumnDef="id">
                                          <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                          <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="estimate_no">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.ESTIMATE_NO}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.ESTIMATE_NO}}:</span>{{row.estimate_no}}
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="estimate_date">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.ESTIMATE_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.ESTIMATE_DATE}}:</span>
                                            <span>{{displayDate(row.create_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="approve_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.APPROVED_NO_ACTION}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.APPROVED_NO_ACTION}}:</span>
                                            <span>{{displayDate(row.approve_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="allocation_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.ALLOCATION_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.ALLOCATION_DATE}}:</span>
                                            <span>{{displayDate(row.allocate_dt) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="qc_dt">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-1_25-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.QC_DATE}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-1_25-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span class="mobile-tab-label">{{translatedLangText.QC_DATE}}:</span>
                                            <span>{{displayDate(repairDS.getRepairJobQcDt(row)) ?? "-"}}</span>
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="status_cv">
                                          <mat-header-cell mat-header-cell *matHeaderCellDef
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            {{translatedLangText.STATUS}}
                                          </mat-header-cell>
                                          <mat-cell mat-cell *matCellDef="let row"
                                            [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                            <span
                                              class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getProcessStatusDescription(row?.status_cv)}}
                                          </mat-cell>
                                        </ng-container>
                                        <ng-container matColumnDef="actions">
                                          <mat-header-cell
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-12-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'"
                                            *matHeaderCellDef>
                                          </mat-header-cell>
                                          <mat-cell *matCellDef="let row; let i=index;"
                                            [ngClass]="'tbl-col-width-per-0_75-xl tbl-col-width-per-12-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm pr-0 justify-content-end'">
                                            @if (canRollbackRepairQC(row)) {
                                            <button mat-icon-button [matMenuTriggerFor]="menu"
                                              (click)="stopEventTrigger($event)">
                                              <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #menu="matMenu">
                                              @if (canRollbackRepairQC(row) && allowPerformAction()) {
                                              <button mat-menu-item (click)="onOverwriteQC($event, row)">
                                                <mat-icon>undo</mat-icon>
                                                <span>{{translatedLangText.OVERWRITE_QC}}</span>
                                              </button>
                                              }
                                              @if (canRollbackRepairQC(row)) {
                                              <button mat-menu-item (click)="onRollbackRepairQC($event, row)">
                                                <mat-icon>undo</mat-icon>
                                                <span>{{translatedLangText.REINSTATE}}</span>
                                              </button>
                                              }
                                            </mat-menu>
                                            }
                                          </mat-cell>
                                        </ng-container>
                                        <mat-header-row *matHeaderRowDef="displayedColumnsRepair"></mat-header-row>
                                        <mat-row *matRowDef="let row; columns: displayedColumnsRepair;"
                                          (click)="repairDialog($event, row)" [style.cursor]="'pointer'" matRipple>
                                        </mat-row>
                                      </table>
                                    </div>
                                    <!-- No result -->
                                    @if (!(repairDS.loading$ | async) && !repairItem.length) {
                                    <div class="no-results">
                                      <mat-divider></mat-divider>
                                      <div class="no-results m-l-20 pt-3">
                                        <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                                      </div>
                                    </div>
                                    }
                                    <!-- Loading spinner -->
                                    @if (repairDS.loading$ | async) {
                                    <div class="tbl-spinner">
                                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                      </mat-progress-spinner>
                                    </div>
                                    }
                                  </div>
                                </div>
                              </div>
                              }
                              @else {
                              <div class="empty-purpose">
                                <mat-icon class="icon-large">error_outline</mat-icon>
                                <span class="mb-3">{{translatedLangText.NO_REPAIR_PURPOSE}}</span>
                                @if (canAddPurpose('repair')) {
                                <button mat-flat-button color="primary"
                                  (click)="updatePurposeDialog($event, 'repair', 'add')">
                                  <mat-icon>
                                    add
                                  </mat-icon>
                                  {{translatedLangText.ADD_REPAIR_PURPOSE}}
                                </button>
                                }
                              </div>
                              }
                              }
                            </mat-tab>
                          </mat-tab-group>
                        </div>
                      </div>
                    </mat-card-content>
                  </div>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.depot_cost_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.depot_cost_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.DEPOT_COST_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.depot_cost_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if ((pdDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(pdDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="position-relative">
                        @if(allowPerformAction()) {
                        <div class="relative-menu">
                          @if (canOverwriteJobNo() && canOverwriteDepotCost()) {
                          <button mat-mini-fab color="primary" [matMenuTriggerFor]="menu"
                            [disabled]="(pdDS.actionLoading$ | async)" class="me-2">
                            <mat-icon>edit</mat-icon>
                          </button>
                          <mat-menu #menu="matMenu">
                            @if (canOverwriteJobNo()) {
                            <button mat-menu-item
                              (click)="overwriteJobNoDialog($event)">{{translatedLangText.OVERWRITE_JOB_NO}}</button>
                            }
                            @if (canOverwriteDepotCost()) {
                            <button mat-menu-item
                              (click)="overwriteDepotCostDialog($event)">{{translatedLangText.OVERWRITE_DEPOT_COST}}</button>
                            }
                          </mat-menu>
                          }
                        </div>
                        }
                        <div class="row">
                          <div
                            class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-xl-0 mt-lg-4 mt-md-4 mt-sm-4 mt-xs-4 m-b-0">
                            <div class="row justify-content-center">
                              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <h6>{{translatedLangText.STORAGE_BILLING_DETAILS}}</h6>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-0 p-t-5 p-b-5 align-right">
                                    <span>{{translatedLangText.BILLING_PROFILE}}:</span>
                                  </div>
                                  <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-0 p-t-5 p-b-5">
                                    <span
                                      class="contact-detail-info font-bold">{{pdItem?.tariff_depot?.description}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-0 p-t-5 p-b-5 align-right">
                                    <span>{{translatedLangText.STORAGE_CALCULATE_BY}}:</span>
                                  </div>
                                  <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-0 p-t-5 p-b-5">
                                    <span
                                      class="contact-detail-info font-bold">{{getStorageCalDescription(pdItem?.storage_cal_cv)
                                      ?? "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-0 p-t-5 p-b-5 align-right">
                                    <span>{{translatedLangText.FREE_STORAGE_DAYS}}:</span>
                                  </div>
                                  <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{pdItem?.free_storage || "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-0 p-t-5 p-b-5 align-right">
                                    <span>{{translatedLangText.BEGIN_DATE}}:</span>
                                  </div>
                                  <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-0 p-t-5 p-b-5">
                                    <span
                                      class="contact-detail-info font-bold">{{displayDate(pdDS.getStorageBeginDate(sot!,
                                      pdItem!)) ||
                                      "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div
                                    class="col-xl-5 col-lg-5 col-md-5 col-sm-5 col-xs-5 m-b-0 p-t-5 p-b-5 align-right">
                                    <span>{{translatedLangText.BILLED_UNTIL}}:</span>
                                  </div>
                                  <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-xs-7 m-b-0 p-t-5 p-b-5">
                                    <span
                                      class="contact-detail-info font-bold">{{displayDate(ogDS.getOutGateItem(sot?.out_gate)?.create_dt)
                                      ||
                                      "-"}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- <table class="table table-striped table-hover">
                              <thead>
                                <tr>
                                  <th class="table-col-6" colspan="2">
                                    {{translatedLangText.STORAGE_BILLING_DETAILS}}
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td class="table-col-6">{{translatedLangText.BILLING_PROFILE}}</td>
                                  <td class="table-col-6">{{pdItem?.tariff_depot?.description}}</td>
                                </tr>
                                <tr>
                                  <td class="table-col-6">{{translatedLangText.STORAGE_CALCULATE_BY}}</td>
                                  <td class="table-col-6">{{getStorageCalDescription(pdItem?.storage_cal_cv) ?? "-"}}
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-6">{{translatedLangText.FREE_STORAGE_DAYS}}</td>
                                  <td class="table-col-6">{{pdItem?.free_storage || "-"}}</td>
                                </tr>
                                <tr>
                                  <td class="table-col-6">{{translatedLangText.STORAGE_BEGIN_DATE}}</td>
                                  <td class="table-col-6">{{displayDate(pdDS.getStorageBeginDate(sot!, pdItem!)) ||
                                    "-"}}
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-6">{{translatedLangText.STORAGE_BILLED_UNTIL}}</td>
                                  <td class="table-col-6">{{displayDate(ogDS.getOutGateItem(sot?.out_gate)?.create_dt)
                                    ||
                                    "-"}}</td>
                                </tr>
                              </tbody>
                            </table> -->
                          </div>
                          <div class="col-xl-7 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                            <div class="responsive_table">
                              <table mat-table [dataSource]="sotDepotCostDetails" matSort
                                class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                                <ng-container matColumnDef="description">
                                  <mat-header-cell mat-header-cell *matHeaderCellDef [ngClass]="''">
                                    {{translatedLangText.DESCRIPTION}}
                                  </mat-header-cell>
                                  <mat-cell mat-cell *matCellDef="let row" [ngClass]="''">
                                    <span
                                      class="mobile-tab-label">{{translatedLangText.DESCRIPTION}}:</span>{{row.description}}
                                  </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="job_no">
                                  <mat-header-cell mat-header-cell *matHeaderCellDef [ngClass]="''">
                                    {{translatedLangText.JOB_NO}}
                                  </mat-header-cell>
                                  <mat-cell mat-cell *matCellDef="let row" [ngClass]="''">
                                    <span class="mobile-tab-label">{{translatedLangText.JOB_NO}}:</span>
                                    <span>{{row.job_no ?? "-"}}</span>
                                  </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="invoice">
                                  <mat-header-cell mat-header-cell *matHeaderCellDef [ngClass]="''">
                                    {{translatedLangText.INVOICE}}
                                  </mat-header-cell>
                                  <mat-cell mat-cell *matCellDef="let row" [ngClass]="''">
                                    <span class="mobile-tab-label">{{translatedLangText.INVOICE}}:</span>
                                    <span>
                                      @if (row.billing_guid) {
                                      <!-- <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon> -->
                                      {{row.invoice_no}}
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="cost">
                                  <mat-header-cell mat-header-cell *matHeaderCellDef [ngClass]="''">
                                    {{translatedLangText.COST}}
                                  </mat-header-cell>
                                  <mat-cell mat-cell *matCellDef="let row" [ngClass]="''">
                                    <span class="mobile-tab-label">{{translatedLangText.COST}}:</span>
                                    <span>{{parse2Decimal(row.cost!) || '-'}}</span>
                                  </mat-cell>
                                </ng-container>
                                <mat-header-row *matHeaderRowDef="displayedColumnsDepotCostDetails"></mat-header-row>
                                <mat-row *matRowDef="let row; columns: displayedColumnsDepotCostDetails;"
                                  (click)="repairDialog($event, row)" [style.cursor]="'pointer'" matRipple>
                                </mat-row>
                              </table>
                            </div>
                            <!-- No result -->
                            @if (!(repairDS.loading$ | async) && !repairItem.length) {
                            <div class="no-results">
                              <mat-divider></mat-divider>
                              <div class="no-results m-l-20 pt-3">
                                <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                              </div>
                            </div>
                            }
                            <!-- Loading spinner -->
                            @if (repairDS.loading$ | async) {
                            <div class="tbl-spinner">
                              <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                              </mat-progress-spinner>
                            </div>
                            }
                            <!-- <div class="row justify-content-center">
                              <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <h5 class="text-column">{{translatedLangText.DESCRIPTION}}</h5>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{translatedLangText.PRE_INSPECTION}}:</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{translatedLangText.LIFT_OFF}}:</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{translatedLangText.LIFT_ON}}:</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{translatedLangText.GATE_IN}}:</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{translatedLangText.GATE_OUT}}:</span>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <h5 class="text-column">{{translatedLangText.JOB_NO}}</h5>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{sot?.preinspect_job_no || "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{sot?.liftoff_job_no || "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{sot?.lifton_job_no || "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{sot?.job_no || "-"}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span class="contact-detail-info font-bold">{{sot?.release_job_no || "-"}}</span>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <h5 class="text-column">{{translatedLangText.INVOICE}}</h5>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-1 p-b-0">
                                    <span>
                                      @if (sot?.billing_sot?.preinsp_billing_guid) {
                                      <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone col-red m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-1 p-b-0">
                                    <span>
                                      @if (sot?.billing_sot?.loff_billing_guid) {
                                      <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone col-red m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-1 p-b-0">
                                    <span>
                                      @if (sot?.billing_sot?.lon_billing_guid){
                                      <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone col-red m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-1 p-b-0">
                                    <span>
                                      @if (sot?.billing_sot?.gin_billing_guid) {
                                      <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone col-red m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-1 p-b-0">
                                    <span>
                                      @if (sot?.billing_sot?.gout_billing_guid) {
                                      <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                      }
                                      @else {
                                      <mat-icon class="material-icons-two-tone col-red m-l-0">-</mat-icon>
                                      }
                                    </span>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-5">
                                    <h5 class="text-column">{{translatedLangText.COST}}</h5>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{parse2Decimal(sot?.billing_sot?.preinspection_cost!) || '-'}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{parse2Decimal(sot?.billing_sot?.lift_off_cost!) || '-'}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{parse2Decimal(sot?.billing_sot?.lift_on_cost!) || '-'}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{parse2Decimal(sot?.billing_sot?.gate_in_cost!) || '-'}}</span>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0 p-t-5 p-b-5">
                                    <span>{{parse2Decimal(sot?.billing_sot?.gate_out_cost!) || '-'}}</span>
                                  </div>
                                </div>
                              </div>
                            </div> -->
                            <!-- <table class="table table-striped table-hover m-b-0">
                              <thead>
                                <tr>
                                  <th class="table-col-1">{{translatedLangText.NO_DOT}}</th>
                                  <th class="table-col-4">{{translatedLangText.DESCRIPTION}}</th>
                                  <th class="table-col-3">{{translatedLangText.JOB_NO}}</th>
                                  <th class="table-col-2">{{translatedLangText.INVOICE}}</th>
                                  <th class="table-col-2">{{translatedLangText.COST}}</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td class="table-col-1">1.</td>
                                  <td class="table-col-4">{{translatedLangText.PRE_INSPECTION}}</td>
                                  <td class="table-col-3">{{sot?.preinspect_job_no || "-"}}</td>
                                  <td class="table-col-2 p-t-0 p-b-0">
                                    @if (sot?.billing_sot?.preinsp_billing_guid) {
                                    <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                    }
                                    @else {
                                    <mat-icon class="material-icons-two-tone col-red m-l-0">close</mat-icon>
                                    }
                                  </td>
                                  <td class="table-col-2">
                                    <span class="cost-label">
                                      <span>{{parse2Decimal(sot?.billing_sot?.preinspection_cost!)}}</span>
                                    </span>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-1">2.</td>
                                  <td class="table-col-4">{{translatedLangText.LIFT_OFF}}</td>
                                  <td class="table-col-3">{{sot?.liftoff_job_no || "-"}}</td>
                                  <td class="table-col-2 p-t-0 p-b-0">
                                    @if (sot?.billing_sot?.loff_billing_guid) {
                                    <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                    }
                                    @else {
                                    <mat-icon class="material-icons-two-tone col-red m-l-0">close</mat-icon>
                                    }
                                  </td>
                                  <td class="table-col-2">
                                    <span class="cost-label">
                                      <span>{{parse2Decimal(sot?.billing_sot?.lift_off_cost!)}}</span>
                                    </span>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-1">3.</td>
                                  <td class="table-col-4">{{translatedLangText.LIFT_ON}}</td>
                                  <td class="table-col-3">{{sot?.lifton_job_no || "-"}}</td>
                                  <td class="table-col-2 p-t-0 p-b-0">
                                    @if (sot?.billing_sot?.lon_billing_guid){
                                    <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                    }
                                    @else {
                                    <mat-icon class="material-icons-two-tone col-red m-l-0">close</mat-icon>
                                    }
                                  </td>
                                  <td class="table-col-2">
                                    <span class="cost-label">
                                      <span>{{parse2Decimal(sot?.billing_sot?.lift_on_cost!)}}</span>
                                    </span>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-1">4.</td>
                                  <td class="table-col-4">{{translatedLangText.TAKE_IN_REFERENCE}}</td>
                                  <td class="table-col-3">{{sot?.job_no || "-"}}</td>
                                  <td class="table-col-2 p-t-0 p-b-0">
                                    @if (sot?.billing_sot?.gin_billing_guid) {
                                    <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                    }
                                    @else {
                                    <mat-icon class="material-icons-two-tone col-red m-l-0">close</mat-icon>
                                    }
                                  </td>
                                  <td class="table-col-2">
                                    <span class="cost-label">
                                      <span>{{parse2Decimal(sot?.billing_sot?.gate_in_cost!)}}</span>
                                    </span>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="table-col-1">5.</td>
                                  <td class="table-col-4">{{translatedLangText.RELEASE_REFERENCE}}</td>
                                  <td class="table-col-3">{{sot?.release_job_no || "-"}}</td>
                                  <td class="table-col-2 p-t-0 p-b-0">
                                    @if (sot?.billing_sot?.gout_billing_guid) {
                                    <mat-icon class="material-icons-two-tone col-green m-l-0">checked</mat-icon>
                                    }
                                    @else {
                                    <mat-icon class="material-icons-two-tone col-red m-l-0">close</mat-icon>
                                    }
                                  </td>
                                  <td class="table-col-2 text-justify">
                                    <span class="cost-label">
                                      <span>{{parse2Decimal(sot?.billing_sot?.gate_out_cost!)}}</span>
                                    </span>
                                  </td>
                                </tr>
                              </tbody>
                            </table> -->
                          </div>
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.booking_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.booking_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.BOOKING_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.booking_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-t-0 p-r-0">
                    @if ((bkDS.loading$ | async) || (schedulingDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(bkDS.loading$ | async) && !(schedulingDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                          @if (allowedTabs.length > 1) {
                          <mat-tab-group class="tlx-mdc-tab-group" dynamicHeight>
                            @for (tab of allowedTabs; track tab.label) {
                            @if (tab.component == 'booking') {
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  {{translatedLangText.BOOKING}}
                                </span>
                              </ng-template>
                              <div class="responsive_table">
                                <table mat-table [dataSource]="bookingList" matSort
                                  class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                                  <ng-container matColumnDef="id">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                    <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="book_type_cv">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.BOOKING_TYPE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span
                                        class="mobile-tab-label">{{translatedLangText.BOOKING_TYPE}}:</span>{{getBookingTypeDescription(row.book_type_cv)}}
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="booking_dt">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.BOOKING_DATE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span class="mobile-tab-label">{{translatedLangText.BOOKING_DATE}}:</span>
                                      <span>{{displayDate(row.booking_dt) ?? "-"}}</span>
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="reference">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-4-xl tbl-col-width-per-4-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.REFERENCE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-4-xl tbl-col-width-per-4-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span class="mobile-tab-label">{{translatedLangText.REFERENCE}}:</span>
                                      <span>{{row.reference ?? "-"}}</span>
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="surveyor">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.SURVEYOR}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span class="mobile-tab-label">{{translatedLangText.SURVEYOR}}:</span>
                                      <span>{{row.test_class_cv ?? "-"}}</span>
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="status_cv">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.STATUS}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span
                                        class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getBookingStatusDescription(row?.status_cv)}}
                                    </mat-cell>
                                  </ng-container>
                                  <mat-header-row *matHeaderRowDef="displayedColumnsBooking"></mat-header-row>
                                  <mat-row *matRowDef="let row; columns: displayedColumnsBooking;"
                                    [style.cursor]="'pointer'" matRipple>
                                  </mat-row>
                                </table>
                              </div>
                              <!-- No result -->
                              @if (!(bkDS.loading$ | async) && !bookingList.length) {
                              <div class="no-results">
                                <mat-divider></mat-divider>
                                <div class="no-results m-l-20 pt-3">
                                  <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                                </div>
                              </div>
                              }
                              <!-- Loading spinner -->
                              @if (bkDS.loading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                            </mat-tab>
                            }
                            @if (tab.component == 'scheduling') {
                            <mat-tab>
                              <ng-template mat-tab-label>
                                <span [ngClass]="'m-r-10 d-flex align-items-center'">
                                  {{translatedLangText.SCHEDULING}}
                                </span>
                              </ng-template>
                              <div class="responsive_table">
                                <table mat-table [dataSource]="schedulingList" matSort
                                  class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                                  <ng-container matColumnDef="id">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                    <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="book_type_cv">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.BOOKING_TYPE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span
                                        class="mobile-tab-label">{{translatedLangText.BOOKING_TYPE}}:</span>{{getBookingTypeDescription(row.book_type_cv)}}
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="scheduling_dt">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.SCHEDULING_DATE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span class="mobile-tab-label">{{translatedLangText.SCHEDULING_DATE}}:</span>
                                      <span>{{displayDate(row?.scheduling_sot?.[0]?.scheduling_dt) ?? "-"}}</span>
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="reference">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-6-xl tbl-col-width-per-6-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.REFERENCE}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-6-xl tbl-col-width-per-6-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span class="mobile-tab-label">{{translatedLangText.REFERENCE}}:</span>
                                      <span>{{row?.scheduling_sot?.[0]?.reference || "-"}}</span>
                                    </mat-cell>
                                  </ng-container>
                                  <ng-container matColumnDef="status_cv">
                                    <mat-header-cell mat-header-cell *matHeaderCellDef
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      {{translatedLangText.STATUS}}
                                    </mat-header-cell>
                                    <mat-cell mat-cell *matCellDef="let row"
                                      [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                      <span
                                        class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getBookingStatusDescription(row?.status_cv)}}
                                    </mat-cell>
                                  </ng-container>
                                  <mat-header-row *matHeaderRowDef="displayedColumnsScheduling"></mat-header-row>
                                  <mat-row *matRowDef="let row; columns: displayedColumnsScheduling;"
                                    [style.cursor]="'pointer'" matRipple>
                                  </mat-row>
                                </table>
                              </div>
                              <!-- No result -->
                              @if (!(schedulingDS.loading$ | async) && !schedulingList.length) {
                              <div class="no-results">
                                <mat-divider></mat-divider>
                                <div class="no-results m-l-20 pt-3">
                                  <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                                </div>
                              </div>
                              }
                              <!-- Loading spinner -->
                              @if (schedulingDS.loading$ | async) {
                              <div class="tbl-spinner">
                                <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                                </mat-progress-spinner>
                              </div>
                              }
                            </mat-tab>
                            }
                            }
                          </mat-tab-group>
                          }
                          @else {
                          @for (tab of allowedTabs; track tab.label) {
                          @if (tab.component == 'booking') {
                          <div class="responsive_table">
                            <table mat-table [dataSource]="bookingList" matSort
                              class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                              <ng-container matColumnDef="id">
                                <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="book_type_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.BOOKING_TYPE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.BOOKING_TYPE}}:</span>{{getBookingTypeDescription(row.book_type_cv)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="booking_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.BOOKING_DATE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.BOOKING_DATE}}:</span>
                                  <span>{{displayDate(row.booking_dt) ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="reference">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-4-xl tbl-col-width-per-4-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.REFERENCE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-4-xl tbl-col-width-per-4-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.REFERENCE}}:</span>
                                  <span>{{row.reference ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="surveyor">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.SURVEYOR}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.SURVEYOR}}:</span>
                                  <span>{{row.test_class_cv ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="status_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.STATUS}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getBookingStatusDescription(row?.status_cv)}}
                                </mat-cell>
                              </ng-container>
                              <mat-header-row *matHeaderRowDef="displayedColumnsBooking"></mat-header-row>
                              <mat-row *matRowDef="let row; columns: displayedColumnsBooking;"
                                [style.cursor]="'pointer'" matRipple>
                              </mat-row>
                            </table>
                          </div>
                          <!-- No result -->
                          @if (!(bkDS.loading$ | async) && !bookingList.length) {
                          <div class="no-results">
                            <mat-divider></mat-divider>
                            <div class="no-results m-l-20 pt-3">
                              <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                            </div>
                          </div>
                          }
                          <!-- Loading spinner -->
                          @if (bkDS.loading$ | async) {
                          <div class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          }
                          }
                          @if (tab.component == 'scheduling') {
                          <div class="responsive_table">
                            <table mat-table [dataSource]="schedulingList" matSort
                              class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                              <ng-container matColumnDef="id">
                                <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="book_type_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.BOOKING_TYPE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.BOOKING_TYPE}}:</span>{{getBookingTypeDescription(row.book_type_cv)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="scheduling_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.SCHEDULING_DATE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.SCHEDULING_DATE}}:</span>
                                  <span>{{displayDate(row?.scheduling_sot?.[0]?.scheduling_dt) ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="reference">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-6-xl tbl-col-width-per-6-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.REFERENCE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-6-xl tbl-col-width-per-6-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.REFERENCE}}:</span>
                                  <span>{{row?.scheduling_sot?.[0]?.reference || "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="status_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.STATUS}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>{{getBookingStatusDescription(row?.status_cv)}}
                                </mat-cell>
                              </ng-container>
                              <mat-header-row *matHeaderRowDef="displayedColumnsScheduling"></mat-header-row>
                              <mat-row *matRowDef="let row; columns: displayedColumnsScheduling;"
                                [style.cursor]="'pointer'" matRipple>
                              </mat-row>
                            </table>
                          </div>
                          <!-- No result -->
                          @if (!(schedulingDS.loading$ | async) && !schedulingList.length) {
                          <div class="no-results">
                            <mat-divider></mat-divider>
                            <div class="no-results m-l-20 pt-3">
                              <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                            </div>
                          </div>
                          }
                          <!-- Loading spinner -->
                          @if (schedulingDS.loading$ | async) {
                          <div class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          }
                          }
                          }
                          }
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="verifySection(accordionSections.survey_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.survey_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.EXTERNAL_SURVEY_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.survey_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if ((surveyDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(surveyDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                          <div class="responsive_table">
                            <table mat-table [dataSource]="surveyList" matSort
                              class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                              <ng-container matColumnDef="id">
                                <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="survey_type">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-3-xl tbl-col-width-per-3-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.SURVEY_TYPE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-3-xl tbl-col-width-per-3-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.SURVEY_TYPE}}:</span>{{getSurveyTypeDescription(row.survey_type_cv)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="survey_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.SURVEY_DATE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.SURVEY_DATE}}:</span>
                                  <span>{{displayDate(row?.survey_dt) ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="surveyor">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.SURVEYOR}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.SURVEYOR}}:</span>{{row.test_class_cv}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="status_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.STATUS}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.STATUS}}:</span>
                                  @if (row?.status_cv === "ACCEPTED") {
                                  <mat-icon [ngClass]="'font-bold text-success'">
                                    checked
                                  </mat-icon>
                                  }
                                  @else {
                                  <mat-icon>
                                    close
                                  </mat-icon>
                                  }
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="remarks">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-3-xl tbl-col-width-per-3-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.REFERENCE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-3-xl tbl-col-width-per-3-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.REFERENCE}}:</span>
                                  <span>{{row.remarks ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="update_by">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.UPDATE_BY}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-1_75-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.UPDATE_BY}}:</span>
                                  <span>{{row.update_by || row.create_by || "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <mat-header-row *matHeaderRowDef="displayedColumnsSurveyDetail"></mat-header-row>
                              <mat-row *matRowDef="let row; columns: displayedColumnsSurveyDetail;"
                                [style.cursor]="'pointer'" matRipple>
                              </mat-row>
                            </table>
                          </div>
                          <!-- No result -->
                          @if (!(surveyDS.loading$ | async) && !surveyList.length) {
                          <div class="no-results">
                            <mat-divider></mat-divider>
                            <div class="no-results m-l-20 pt-3">
                              <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                            </div>
                          </div>
                          }
                          <!-- Loading spinner -->
                          @if (surveyDS.loading$ | async) {
                          <div class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          }
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>

                @if(allowPerformAction()){
                <mat-expansion-panel [expanded]="verifySection(accordionSections.transfer_details)">
                  <mat-expansion-panel-header class="ps-0" (click)="setSection(accordionSections.transfer_details)">
                    <mat-panel-title>
                      <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="header">
                          <h2>
                            {{translatedLangText.RELOCATION_DETAILS}}
                          </h2>
                        </div>
                        <button mat-icon-button (click)="expandAll($event, accordionSections.transfer_details)"
                          matTooltip="Expand All Sections">
                          <mat-icon>unfold_more</mat-icon>
                        </button>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if ((bkDS.loading$ | async) || (schedulingDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(bkDS.loading$ | async) && !(schedulingDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                          <div class="responsive_table">
                            <table mat-table [dataSource]="transferList" matSort
                              class="mat-cell advance-tab-table striped-rows hover-highlight dark-header curve-table">
                              <ng-container matColumnDef="id">
                                <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>
                                <mat-cell *matCellDef="let row">{{row.guid}}</mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="transfer_out_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.FROM}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.FROM}}:</span>{{displayDate(row.transfer_out_dt)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="transfer_in_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.TO}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_75-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.TO}}:</span>
                                  <span>{{displayDate(row.transfer_in_dt) ?? "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="days">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-1_5-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.DAYS}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-1_5-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span class="mobile-tab-label">{{translatedLangText.DAYS}}:</span>
                                  <span>{{transferDS.getDays(row) || "-"}}</span>
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="location_from_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.FROM_YARD}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.FROM_YARD}}:</span>{{getYardDescription(row?.location_from_cv)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="location_to_cv">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.TO_YARD}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-1_5-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.TO_YARD}}:</span>{{getYardDescription(row?.location_to_cv)}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="update_by">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.UPDATE_BY}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.UPDATE_BY}}:</span>{{row?.update_by}}
                                </mat-cell>
                              </ng-container>
                              <ng-container matColumnDef="update_dt">
                                <mat-header-cell mat-header-cell *matHeaderCellDef
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  {{translatedLangText.UPDATE_DATE}}
                                </mat-header-cell>
                                <mat-cell mat-cell *matCellDef="let row"
                                  [ngClass]="'tbl-col-width-per-2-xl tbl-col-width-per-2-lg tbl-col-width-per-12-md tbl-col-width-per-12-sm'">
                                  <span
                                    class="mobile-tab-label">{{translatedLangText.UPDATE_DATE}}:</span>{{displayDateTime(row?.update_dt
                                  || row?.create_dt)}}
                                </mat-cell>
                              </ng-container>
                              <mat-header-row *matHeaderRowDef="displayedColumnsTransfer"></mat-header-row>
                              <mat-row *matRowDef="let row; columns: displayedColumnsTransfer;"
                                [style.cursor]="'pointer'" matRipple>
                              </mat-row>
                            </table>
                          </div>
                          <!-- No result -->
                          @if (!(transferDS.loading$ | async) && !transferList.length) {
                          <div class="no-results">
                            <mat-divider></mat-divider>
                            <div class="no-results m-l-20 pt-3">
                              <h5 class="m-b-15">{{translatedLangText.NO_RESULT}}</h5>
                            </div>
                          </div>
                          }
                          <!-- Loading spinner -->
                          @if (transferDS.loading$ | async) {
                          <div class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          }
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel>
                }
                <!-- <mat-expansion-panel [expanded]="section === 'tank_overview'" (click)="setSection('tank_overview')">
                  <mat-expansion-panel-header class="ps-0">
                    <mat-panel-title>
                      <div class="header">
                        <h2>
                          {{translatedLangText.TANK_OVERVIEW}}
                        </h2>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="body p-l-0 p-r-0">
                    @if ((bkDS.loading$ | async) || (schedulingDS.loading$ | async)) {
                    <div class="tbl-spinner">
                      <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                      </mat-progress-spinner>
                    </div>
                    }
                    @if (!(bkDS.loading$ | async) && !(schedulingDS.loading$ | async)) {
                    <mat-card-content>
                      <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-0">
                          <mat-stepper class="example-stepper" labelPosition="bottom" [orientation]="(stepperOrientation | async)!">
                            <mat-step>
                              <ng-template matStepLabel>SO Generated</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>In Gate</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>In Gate Survey</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Steam</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Residue</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Cleaning</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Repair</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Storage</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Out Gate</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Out Gate Survey</ng-template>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>RO Generated</ng-template>
                            </mat-step>
                          </mat-stepper>
                          @if (schedulingDS.loading$ | async) {
                          <div class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          }
                        </div>
                      </div>
                    </mat-card-content>
                    }
                  </div>
                </mat-expansion-panel> -->
              </mat-accordion>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>